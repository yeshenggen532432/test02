if("undefined"==typeof jQuery)throw new Error("uglcw.core requires jQuery");!function(c,t){"use strict";Array.prototype.findIndex=Array.prototype.findIndex||function(t){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),n=e.length>>>0,o=arguments[1],i=0;i<n;i++)if(t.call(o,e[i],i,e))return i;return-1};var u=function(){return{}};u.fn=u.prototype={},u.extend=u.fn.extend=function(){var t,e,n,o,i,a,r=arguments[0]||{},s=1,l=arguments.length,d=!1;for("boolean"==typeof r&&(d=r,r=arguments[s]||{},s++),"object"==typeof r||c.isFunction(r)||(r={}),s===l&&(r=this,s--);s<l;s++)if(null!=(t=arguments[s]))for(e in t)n=r[e],r!==(o=t[e])&&(d&&o&&(c.isPlainObject(o)||(i=c.isArray(o)))?(a=i?(i=!1,n&&c.isArray(n)?n:[]):n&&c.isPlainObject(n)?n:{},r[e]=u.extend(d,a,o)):void 0!==o&&(r[e]=o));return r},c.each(["show","hide"],function(t,e){var n=c.fn[e];c.fn[e]=function(){return this.trigger(e),n.apply(this,arguments)}}),c.fn.hasScrollBar=function(t){return"vertical"==t?this.get(0).scrollHeight>this.innerHeight():"horizontal"==t&&this.get(0).scrollWidth>this.innerWidth()},c.fn.hasHScrollBar=function(){return this.get(0).scrollWidth>this.innerWidth()},c.fn.hasVScrollBar=function(){return this.get(0).scrollHeight>this.innerHeight()},t.uglcw=u}(jQuery,window),function($,window,uglcw){"use strict";var util={};$.fn.getCursorPosition=function(){var t=this.get(0);if(t){if("selectionStart"in t)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange(),n=document.selection.createRange().text.length;return e.moveStart("character",-t.value.length),e.text.length-n}}},util.isNull=function(t){return null==t||""===t},util.toInt=function(t){return isNaN(t)?0:this.isNull(t)?0:1*t},util.toDecimal=function(t){return isNaN(t)?0:this.isNull(t)?0:1*t},util.toBoolean=function(t){return null!=t&&(0<util.toInt(t)||"true"==t.toString().toLowerCase())},util.toDate=function(t){return new Date(Date.parse(t.replace(/-/g,"/")))},util.formatDate=function(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return e},util.queryString=function(t){for(var e,n={},o=(t=t||window.location.href).slice(t.indexOf("?")+1).split("&"),i=0;i<o.length;i++)n[(e=o[i].split("="))[0]]=e[1];return n},util.arrayToTree=function(t,e){var o=uglcw.extend({root:"0",parent:"pid",id:"id",children:"children"},e),n=[],i={};return $(t).each(function(t,e){(i[e[o.id]]=e)[o.parent]==o.root&&(e.children=[],n.push(e))}),$(t).each(function(t,e){var n=e[o.parent];i[n]&&(i[n][o.children]||(i[n][o.children]=[]),i[n][o.children].push(e))}),n},util.parseObject=function(str){var opts={};if(str){"{"!==str.charAt(0)&&(str="{"+str+"}");try{opts=eval("("+str+")")}catch(t){console.error("配置解析失败",str,t)}}return opts},util.getScrollBarWidth=function(t){if(isNaN(util._scrollbar)||t){var e,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),util._scrollbar=e=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),e}return util._scrollbar},util.debounce=function(t,n){var o=t,i=null;return function(){var t=this,e=arguments;clearTimeout(i),i=setTimeout(function(){o.apply(t,e)},n)}},util.throttle=function(t,n){var o=t,i=null,a=!0;return function(){var t=this,e=arguments;if(a)return o.apply(t,e),void(a=!1);i||(i=setTimeout(function(){clearTimeout(i),i=null,o.apply(t,e)},n))}};var calculator=function(){function u(t){var e,n={times:1,num:0};if(e=t,Math.floor(e)===e)return n.num=t,n;var o=t+"",i=o.indexOf("."),a=o.substr(i+1).length,r=Math.pow(10,a),s=Number(t.toString().replace(".",""));return n.times=r,n.num=s,n}function o(t,e,n,o){var i=u(t),a=u(e),r=i.num,s=a.num,l=i.times,d=a.times,c=d<l?l:d;switch(o){case"add":return(l===d?r+s:d<l?r+s*(l/d):r*(d/l)+s)/c;case"subtract":return(l===d?r-s:d<l?r-s*(l/d):r*(d/l)-s)/c;case"multiply":return r*s/(l*d);case"divide":return r/s*(d/l)}}return{add:function(t,e,n){return o(t,e,0,"add")},subtract:function(t,e,n){return o(t,e,0,"subtract")},multiply:function(t,e,n){return o(t,e,0,"multiply")},divide:function(t,e,n){return o(t,e,0,"divide")}}}();util.add=calculator.add,util.subtract=calculator.subtract,util.multiply=calculator.multiply,util.divide=calculator.divide,uglcw.util=util}(jQuery,window,uglcw),function(e,i,t){"use strict";if(i==i.top){var a={subscribe:[]},n={on:function(t,e,n){a[t]?a[t].push({win:n,handler:e}):a[t]=[{win:n,handler:e}]},off:function(t,n){var e=a[t];if(e&&0<e.length){var o=e.findIndex(function(t,e){return e.win=n});-1!=o&&e.splice(o,1)}},emit:function(t,n,o){a[t]&&e(a[t]).each(function(t,e){e.win!=o&&e.handler.call(this,n)})},offline:function(o){e.map(a,function(t,e){var n=t.findIndex(function(t){return t.win==o});-1!=n&&t.splice(n,1)})}};console.trace("root io is ready"),t.topics=n,t._topics=a}else e(i).unload(function(){i.top.uglcw.topics.offline(i)});var o={emit:function(t,e,n,o){i.top.uglcw.topics.emit(t,e,n||i,o)},on:function(t,e){i.top.uglcw.topics.on(t,e,i)},off:function(t){i.top.uglcw.topics.off(t,i)},broadcast:function(t,e){i.top.uglcw.topics.broadcast(t,e,i)}};t.io=o}(jQuery,window,uglcw),function(s,a,l){"use strict";var d={},r=l.util,o="uglcw-";function e(t){this._obj=t,s(this._obj).data("qui",this)}function c(t){e.call(this,t)}function t(t){c.call(this,t)}d.attrPrefix=o,d.attr=function(t,e,n){if(void 0===n)return s(t).attr(o+e);s(t).attr(o+e,n)},d.removeAttr=function(t,e){s(t).removeAttr(o+e)},d.hasAttr=function(t,e){return void 0!==(e=d.attr(t,e))&&!1!==e},d.navigate=function(t,e,n){if(e)for(var o in t+="?",e)s.isFunction(e[o])||(t=t+o+"="+e[o]+"&");n?a.open(t):document.location.href=t},d.openTab=function(t,e){var n=l.util.queryString(),o=l.util.queryString(e),i=n._sticky||_STICKY;!o._sticky&&i&&(-1===e.indexOf("?")?e+="?_sticky="+i:e+="&_sticky="+i),a.top.openTab?a.top.openTab(t,e):a.open(e,"_blank")},d.replaceCurrentTab=function(t,e){a.top.replaceCurrentTab?a.top.replaceCurrentTab(t,e):a.location.href=e},d.closeCurrentTab=function(){a.top.closeCurrentTab&&a.top.closeCurrentTab()},d.closeOtherTab=function(){a.top.closeOtherTab&&a.top.closeOtherTab()},d.reload=function(){document.location.href=document.location.href},d.init=function(t){var e=void 0===t,a=[];s(t=t||"body").find("[uglcw-role]").each(function(t,e){var n=d.attr(e,"options");d.removeAttr(e,"options");d.attr(e,"role");var o=d.hasAttr(e,"skip");n=r.parseObject(n);var i=d.get(e);!i||i.k()||o||(i.lazy&&i.lazy()?a.push({widget:i,options:n}):i.init(n))}),s(a).each(function(t,e){e.widget.init(e.options)}),e&&l.layout.init()},d.bind=function(t,a){if(t=t||"body",void 0===a){var r={};return s(t).find("[uglcw-role][uglcw-model]").each(function(t,e){var n=d.get(e),o=d.attr(e,"model");if(n.bind){var i=n.bind(o);i&&s.extend(r,i)}else r[o]=n.value()}),r}s(t).find("[uglcw-role][uglcw-model]").each(function(t,e){var n=d.get(e),o=d.attr(e,"model");if(n.bind)n.bind(o,a);else{var i=a[o];void 0!==i&&n.value(i)}})},d.bindFormData=function(t){t=t||"body";var a=new FormData;return s(t).find("[uglcw-role][uglcw-model]").each(function(t,e){var n=d.get(e),o=d.attr(e,"model");if(n.bindFormData)a=n.bindFormData(a);else if(n.bind){var i=n.bind(o);i&&s.map(i,function(t,e){a.append(e,t)})}else a.append(o,n.value())}),a},d.clear=function(t,e,r){r=l.extend({excludeHidden:!0,excludeWidgets:["datepicker"]},r);s(t).find("[uglcw-role][uglcw-model]").each(function(t,e){var n=d.attr(e,"role");if(!(r.excludeWidgets&&0<r.excludeWidgets.length&&-1!==r.excludeWidgets.indexOf(n))){var o=d.get(e),i={};if(!r.excludeHidden||!o.hidden){var a=d.attr(e,"model");i[a]="",o.bind?o.bind(a,i):o.value("")}}}),void 0!==e&&d.bind(t,e)},d.enable=function(t,o){s(t).find("[uglcw-role]").each(function(t,e){var n=d.get(e);n.enable&&n.enable(o)})},d.readonly=function(t,o){s(t).find("[uglcw-role]").each(function(t,e){var n=d.get(e);n.readonly&&n.readonly(o)})},d.get=function(t){},e.prototype={init:function(t){},on:function(t,e){},element:function(){return this._obj},_getSupportedEvents:function(){return[]},isSupportedEvent:function(t){return t=t||"",-1!=s.inArray(t.toUpperCase(),this._getSupportedEvents())},destroy:function(){}},((c.prototype=new e).constructor=c).prototype.show=function(){s(this._obj).show()},c.prototype.hide=function(){s(this._obj).hide()},((t.prototype=new c).constructor=t).prototype.init=function(t){var o=this,e=d.attr(o._obj,"model");e&&s(o._obj).attr("name",e);var n=d.attr(o._obj,"validate");if(n){d.attr(o._obj,"msg");var i=s(o._obj).attr("name");s(o._obj).after('<span class="k-invalid-msg" data-for="'+i+'"></span>');var a=n.split("|");s(a).each(function(t,e){if(e){var n=e.split(":");switch(n[0].toLowerCase()){case"required":s(o._obj).attr("required",!0),s(o._obj).attr("data-required-msg","请输入必填项");break;case"number":break;case"email":s(o._obj).attr("type","email"),s(o._obj).attr("validationMessage","请输入正确的Email");break;case"mobile":s(o._obj).attr("pattern","1[0-9]{10}"),s(o._obj).attr("type","text"),s(o._obj).attr("validationMessage","请输入正确的手机号");break;case"url":s(o._obj).attr("type","url"),s(o._obj).attr("validationMessage","请输入正确的URL");break;case"pattern":s(o._obj).attr("type","text"),s(o._obj).attr("pattern",n[1]),s(o._obj).attr("validationMessage","请输入正确的内容")}}})}c.prototype.init.call(this,t)},t.prototype.on=function(t,e){var n=this.k();n&&n.bind?n.bind(t,e):s(this._obj).bind(t,e)},t.prototype.initEvent=function(t){if(t)for(var e in t)0==e.indexOf("on")&&(s.isFunction(t[e])?this.on(e.substr(2),t[e]):this.on(e.substr(2),function(){a[t[e]]()}))},t.prototype.k=function(){},t.prototype.destory=function(){var t=this.k();t&&t.destroy()},d.BaseUI=e,d.EditableUI=c,d.KUI=t,l.ui=d}(jQuery,window,uglcw),function(r,s,l){"use strict";var t=l.ui,d="iziToast",c=(document.querySelector("body"),!!/Mobi/.test(navigator.userAgent)),a=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),u="undefined"!=typeof InstallTrigger,p="ontouchstart"in document.documentElement,n=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],f={},h={id:null,className:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:60,maxWidth:null,zindex:null,layout:2,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"topRight",target:"",targetFirst:null,timeout:5e3,rtl:!1,animateInside:!1,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.1)",transitionIn:"fadeInLeft",transitionOut:"fadeOutRight",transitionInMobile:"bounceInDown",transitionOutMobile:"fadeOutUp",buttons:{},inputs:{},audio:"",onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}},b={children:{},setSetting:function(t,e,n){b.children[t][e]=n},getSetting:function(t,e){return b.children[t][e]},settings:function(t){b.destroy(),h=v(h,(f=t)||{})},destroy:function(){m(document.querySelectorAll("."+d+"-overlay"),function(t,e){t.remove()}),m(document.querySelectorAll("."+d+"-wrapper"),function(t,e){t.remove()}),m(document.querySelectorAll("."+d),function(t,e){t.remove()}),this.children={},document.removeEventListener(d+"-opened",{},!1),document.removeEventListener(d+"-opening",{},!1),document.removeEventListener(d+"-closing",{},!1),document.removeEventListener(d+"-closed",{},!1),document.removeEventListener("keyup",{},!1),f={}},msg:function(t,e){4==e.icon&&(e.overlay=!0,e.timeout=!1,e.drag=!1,e.displayMode=0);e.icon=["ico-success","ico-error","ico-warning","ico-load","ico-info"][e.icon-1];var n={message:t,position:"topCenter",transitionIn:"bounceInDown",transitionOut:"fadeOut",transitionOutMobile:"fadeOut",progressBar:!1,close:!1,layout:1,audio:""},o=v(f,e||{});o=v(n,o||{}),this.show(o)},hide:function(t,e,n){"object"!=typeof e&&(e=document.querySelector(e));var o=this,i=v(this.children[e.getAttribute("data-iziToast-ref")],t||{});i.closedBy=n||null,delete i.time.REMAINING,e.classList.add(d+"-closing"),function(){var t=document.querySelector("."+d+"-overlay");if(null!==t){var e=t.getAttribute("data-iziToast-ref"),n=(e=e.split(",")).indexOf(String(i.ref));-1!==n&&e.splice(n,1),t.setAttribute("data-iziToast-ref",e.join()),0===e.length&&(t.classList.remove("fadeIn"),t.classList.add("fadeOut"),setTimeout(function(){t.remove()},700))}}(),i.transitionIn&&e.classList.remove(i.transitionIn),i.transitionInMobile&&e.classList.remove(i.transitionInMobile),c||s.innerWidth<=568?i.transitionOutMobile&&e.classList.add(i.transitionOutMobile):i.transitionOut&&e.classList.add(i.transitionOut);var a=e.parentNode.offsetHeight;e.parentNode.style.height=a+"px",e.style.pointerEvents="none",(!c||568<s.innerWidth)&&(e.parentNode.style.transitionDelay="0.2s");try{var r=new CustomEvent(d+"-closing",{detail:i,bubbles:!0,cancelable:!0});document.dispatchEvent(r)}catch(t){console.warn(t)}setTimeout(function(){e.parentNode.style.height="0px",e.parentNode.style.overflow="",setTimeout(function(){delete o.children[i.ref],e.parentNode.remove();try{var t=new CustomEvent(d+"-closed",{detail:i,bubbles:!0,cancelable:!0});document.dispatchEvent(t)}catch(t){console.warn(t)}void 0!==i.onClosed&&i.onClosed.apply(null,[i,e,n])},1e3)},200),void 0!==i.onClosing&&i.onClosing.apply(null,[i,e,n])},show:function(t){var i=this,a=v(f,t||{});if((a=v(h,a)).time={},null===a.id&&(a.id=y(a.title+a.message+a.color)),1==a.displayMode||"once"==a.displayMode)try{if(0<document.querySelectorAll("."+d+"#"+a.id).length)return!1}catch(t){console.warn("["+d+"] Could not find an element with this selector: #"+a.id+". Try to set an valid id.")}if(2==a.displayMode||"replace"==a.displayMode)try{m(document.querySelectorAll("."+d+"#"+a.id),function(t,e){i.hide(a,t,"replaced")})}catch(t){console.warn("["+d+"] Could not find an element with this selector: #"+a.id+". Try to set an valid id.")}a.ref=(new Date).getTime()+Math.floor(1e7*Math.random()+1),b.children[a.ref]=a;var o,r={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:a.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};r.toast.setAttribute("data-iziToast-ref",a.ref),r.toast.appendChild(r.toastBody),r.toastCapsule.appendChild(r.toast),function(){if(r.toast.classList.add(d),r.toast.classList.add(d+"-opening"),r.toastCapsule.classList.add(d+"-capsule"),r.toastBody.classList.add(d+"-body"),r.toastTexts.classList.add(d+"-texts"),c||s.innerWidth<=568?a.transitionInMobile&&r.toast.classList.add(a.transitionInMobile):a.transitionIn&&r.toast.classList.add(a.transitionIn),a.className){var t=a.className.split(" ");m(t,function(t,e){r.toast.classList.add(t)})}a.id&&(r.toast.id=a.id),a.rtl&&(r.toast.classList.add(d+"-rtl"),r.toast.setAttribute("dir","rtl")),1<a.layout&&r.toast.classList.add(d+"-layout"+a.layout),a.balloon&&r.toast.classList.add(d+"-balloon"),a.maxWidth&&(isNaN(a.maxWidth)?r.toast.style.maxWidth=a.maxWidth:r.toast.style.maxWidth=a.maxWidth+"px"),""===a.theme&&"light"===a.theme||r.toast.classList.add(d+"-theme-"+a.theme),a.color&&(k(a.color)?r.toast.style.background=a.color:r.toast.classList.add(d+"-color-"+a.color)),a.backgroundColor&&(r.toast.style.background=a.backgroundColor,a.balloon&&(r.toast.style.borderColor=a.backgroundColor))}(),a.image&&(r.cover.classList.add(d+"-cover"),r.cover.style.width=a.imageWidth+"px",w(a.image.replace(/ /g,""))?r.cover.style.backgroundImage="url(data:image/png;base64,"+a.image.replace(/ /g,"")+")":r.cover.style.backgroundImage="url("+a.image+")",a.rtl?r.toastBody.style.marginRight=a.imageWidth+"px":r.toastBody.style.marginLeft=a.imageWidth+"px",r.toast.appendChild(r.cover)),a.close?(r.buttonClose=document.createElement("button"),r.buttonClose.setAttribute("type","button"),r.buttonClose.classList.add(d+"-close"),r.buttonClose.addEventListener("click",function(t){t.target,i.hide(a,r.toast,"button")}),r.toast.appendChild(r.buttonClose)):a.rtl?r.toast.style.paddingLeft="18px":r.toast.style.paddingRight="18px",a.progressBar&&(r.progressBar=document.createElement("div"),r.progressBarDiv=document.createElement("div"),r.progressBar.classList.add(d+"-progressbar"),r.progressBarDiv.style.background=a.progressBarColor,r.progressBar.appendChild(r.progressBarDiv),r.toast.appendChild(r.progressBar)),a.timeout&&(a.pauseOnHover&&!a.resetOnHover&&(r.toast.addEventListener("mouseenter",function(t){i.progress(a,r.toast).pause()}),r.toast.addEventListener("mouseleave",function(t){i.progress(a,r.toast).resume()})),a.resetOnHover&&(r.toast.addEventListener("mouseenter",function(t){i.progress(a,r.toast).reset()}),r.toast.addEventListener("mouseleave",function(t){i.progress(a,r.toast).start()}))),a.iconUrl?(r.icon.setAttribute("class",d+"-icon"),r.icon.setAttribute("src",a.iconUrl)):a.icon&&(r.icon.setAttribute("class",d+"-icon "+a.icon),a.iconText&&r.icon.appendChild(document.createTextNode(a.iconText)),a.iconColor&&(r.icon.style.color=a.iconColor)),(a.icon||a.iconUrl)&&(a.rtl?r.toastBody.style.paddingRight="33px":r.toastBody.style.paddingLeft="33px",r.toastBody.appendChild(r.icon)),0<a.title.length&&(r.strong=document.createElement("strong"),r.strong.classList.add(d+"-title"),r.strong.appendChild(g(a.title)),r.toastTexts.appendChild(r.strong),a.titleColor&&(r.strong.style.color=a.titleColor),a.titleSize&&(isNaN(a.titleSize)?r.strong.style.fontSize=a.titleSize:r.strong.style.fontSize=a.titleSize+"px"),a.titleLineHeight&&(isNaN(a.titleSize)?r.strong.style.lineHeight=a.titleLineHeight:r.strong.style.lineHeight=a.titleLineHeight+"px")),0<a.message.length&&(r.p=document.createElement("p"),r.p.classList.add(d+"-message"),r.p.appendChild(g(a.message)),r.toastTexts.appendChild(r.p),a.messageColor&&(r.p.style.color=a.messageColor),a.messageSize&&(isNaN(a.titleSize)?r.p.style.fontSize=a.messageSize:r.p.style.fontSize=a.messageSize+"px"),a.messageLineHeight&&(isNaN(a.titleSize)?r.p.style.lineHeight=a.messageLineHeight:r.p.style.lineHeight=a.messageLineHeight+"px")),0<a.title.length&&0<a.message.length&&(a.rtl?r.strong.style.marginLeft="10px":2==a.layout||a.rtl||(r.strong.style.marginRight="10px",r.strong.style.marginBottom="0px")),r.toastBody.appendChild(r.toastTexts),0<a.inputs.length&&(r.inputs.classList.add(d+"-inputs"),m(a.inputs,function(e,t){r.inputs.appendChild(g(e[0])),(o=r.inputs.childNodes)[t].classList.add(d+"-inputs-child"),e[3]&&setTimeout(function(){o[t].focus()},300),o[t].addEventListener(e[1],function(t){return(0,e[2])(i,r.toast,this,t)})}),r.toastBody.appendChild(r.inputs)),0<a.buttons.length&&(r.buttons.classList.add(d+"-buttons"),m(a.buttons,function(e,t){r.buttons.appendChild(g(e[0]));var n=r.buttons.childNodes;n[t].classList.add(d+"-buttons-child"),e[2]&&setTimeout(function(){n[t].focus()},300),n[t].addEventListener("click",function(t){return t.preventDefault(),(0,e[1])(i,r.toast,this,t,o)})})),r.toastTexts.appendChild(r.buttons),0<a.message.length&&(0<a.inputs.length||0<a.buttons.length)&&(r.p.style.marginBottom="0"),(0<a.inputs.length||0<a.buttons.length)&&(a.rtl?r.toastTexts.style.marginLeft="10px":r.toastTexts.style.marginRight="10px",0<a.inputs.length&&0<a.buttons.length&&(a.rtl?r.inputs.style.marginLeft="8px":r.inputs.style.marginRight="8px")),r.toastCapsule.style.visibility="hidden",setTimeout(function(){var t=r.toast.offsetHeight,e=r.toast.currentStyle||s.getComputedStyle(r.toast),n=e.marginTop;n=n.split("px"),n=parseInt(n[0]);var o=e.marginBottom;o=o.split("px"),o=parseInt(o[0]),r.toastCapsule.style.visibility="",r.toastCapsule.style.height=t+o+n+"px",setTimeout(function(){r.toastCapsule.style.height="auto",a.target&&(r.toastCapsule.style.overflow="visible")},500),a.timeout&&i.progress(a,r.toast).start()},100),function(){var t=a.position;if(a.target)r.wrapper=document.querySelector(a.target),r.wrapper.classList.add(d+"-target"),a.targetFirst?r.wrapper.insertBefore(r.toastCapsule,r.wrapper.firstChild):r.wrapper.appendChild(r.toastCapsule);else{if(-1==n.indexOf(a.position))return console.warn("["+d+"] Incorrect position.\nIt can be › "+n);t=c||s.innerWidth<=568?"bottomLeft"==a.position||"bottomRight"==a.position||"bottomCenter"==a.position?d+"-wrapper-bottomCenter":"topLeft"==a.position||"topRight"==a.position||"topCenter"==a.position?d+"-wrapper-topCenter":d+"-wrapper-center":d+"-wrapper-"+t,r.wrapper=document.querySelector("."+d+"-wrapper."+t),r.wrapper||(r.wrapper=document.createElement("div"),r.wrapper.classList.add(d+"-wrapper"),r.wrapper.classList.add(t),document.body.appendChild(r.wrapper));var e=a.targetFirst;null!=e&&null!=e||"topLeft"!=a.position&&"topCenter"!=a.position&&"topRight"!=a.position||(e=!0),e?r.wrapper.insertBefore(r.toastCapsule,r.wrapper.firstChild):r.wrapper.appendChild(r.toastCapsule)}isNaN(a.zindex)?console.warn("["+d+"] Invalid zIndex."):r.wrapper.style.zIndex=a.zindex}(),a.overlay&&(null!==document.querySelector("."+d+"-overlay.fadeIn")?(r.overlay=document.querySelector("."+d+"-overlay"),r.overlay.setAttribute("data-iziToast-ref",r.overlay.getAttribute("data-iziToast-ref")+","+a.ref),isNaN(a.zindex)||null===a.zindex||(r.overlay.style.zIndex=a.zindex-1)):(r.overlay.classList.add(d+"-overlay"),r.overlay.classList.add("fadeIn"),r.overlay.style.background=a.overlayColor,r.overlay.setAttribute("data-iziToast-ref",a.ref),isNaN(a.zindex)||null===a.zindex||(r.overlay.style.zIndex=a.zindex-1),document.querySelector("body").appendChild(r.overlay)),a.overlayClose?(r.overlay.removeEventListener("click",{}),r.overlay.addEventListener("click",function(t){i.hide(a,r.toast,"overlay")})):r.overlay.removeEventListener("click",{})),function(){if(a.animateInside){r.toast.classList.add(d+"-animateInside");var t=[200,100,300];"bounceInLeft"!=a.transitionIn&&"bounceInRight"!=a.transitionIn||(t=[400,200,400]),0<a.title.length&&setTimeout(function(){r.strong.classList.add("slideIn")},t[0]),0<a.message.length&&setTimeout(function(){r.p.classList.add("slideIn")},t[1]),(a.icon||a.iconUrl)&&setTimeout(function(){r.icon.classList.add("revealIn")},t[2]);var n=150;0<a.buttons.length&&r.buttons&&setTimeout(function(){m(r.buttons.childNodes,function(t,e){setTimeout(function(){t.classList.add("revealIn")},n),n+=150})},0<a.inputs.length?150:0),0<a.inputs.length&&r.inputs&&(n=150,m(r.inputs.childNodes,function(t,e){setTimeout(function(){t.classList.add("revealIn")},n),n+=150}))}}(),a.onOpening.apply(null,[a,r.toast]);try{var e=new CustomEvent(d+"-opening",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(e)}catch(t){console.warn(t)}setTimeout(function(){r.toast.classList.remove(d+"-opening"),r.toast.classList.add(d+"-opened");try{var t=new CustomEvent(d+"-opened",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(t)}catch(t){console.warn(t)}a.onOpened.apply(null,[a,r.toast])},1e3),a.drag&&(p?(r.toast.addEventListener("touchstart",function(t){x.startMoving(this,i,a,t)},!1),r.toast.addEventListener("touchend",function(t){x.stopMoving(this,t)},!1)):(r.toast.addEventListener("mousedown",function(t){t.preventDefault(),x.startMoving(this,i,a,t)},!1),r.toast.addEventListener("mouseup",function(t){t.preventDefault(),x.stopMoving(this,t)},!1))),a.closeOnEscape&&document.addEventListener("keyup",function(t){27==(t=t||s.event).keyCode&&i.hide(a,r.toast,"esc")}),a.closeOnClick&&r.toast.addEventListener("click",function(t){i.hide(a,r.toast,"toast")}),a.audio&&i.playSound(a.audio),i.toast=r.toast},progress:function(t,e,n){var o=this,i=e.getAttribute("data-iziToast-ref"),a=v(this.children[i],t||{}),r=e.querySelector("."+d+"-progressbar div");return{start:function(){void 0===a.time.REMAINING&&(e.classList.remove(d+"-reseted"),null!==r&&(r.style.transition="width "+a.timeout+"ms "+a.progressBarEasing,r.style.width="0%"),a.time.START=(new Date).getTime(),a.time.END=a.time.START+a.timeout,a.time.TIMER=setTimeout(function(){clearTimeout(a.time.TIMER),e.classList.contains(d+"-closing")||(o.hide(a,e,"timeout"),"function"==typeof n&&n.apply(o))},a.timeout),o.setSetting(i,"time",a.time))},pause:function(){if(void 0!==a.time.START&&!e.classList.contains(d+"-paused")&&!e.classList.contains(d+"-reseted")){if(e.classList.add(d+"-paused"),a.time.REMAINING=a.time.END-(new Date).getTime(),clearTimeout(a.time.TIMER),o.setSetting(i,"time",a.time),null!==r){var t=s.getComputedStyle(r).getPropertyValue("width");r.style.transition="none",r.style.width=t}"function"==typeof n&&setTimeout(function(){n.apply(o)},10)}},resume:function(){void 0!==a.time.REMAINING?(e.classList.remove(d+"-paused"),null!==r&&(r.style.transition="width "+a.time.REMAINING+"ms "+a.progressBarEasing,r.style.width="0%"),a.time.END=(new Date).getTime()+a.time.REMAINING,a.time.TIMER=setTimeout(function(){clearTimeout(a.time.TIMER),e.classList.contains(d+"-closing")||(o.hide(a,e,"timeout"),"function"==typeof n&&n.apply(o))},a.time.REMAINING),o.setSetting(i,"time",a.time)):this.start()},reset:function(){clearTimeout(a.time.TIMER),delete a.time.REMAINING,o.setSetting(i,"time",a.time),e.classList.add(d+"-reseted"),e.classList.remove(d+"-paused"),null!==r&&(r.style.transition="none",r.style.width="100%"),"function"==typeof n&&setTimeout(function(){n.apply(o)},10)}}}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof s.CustomEvent){var e=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};e.prototype=s.Event.prototype,s.CustomEvent=e}var m=function(t,e,n){if("[object Object]"===Object.prototype.toString.call(t))for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(n,t[o],o,t);else if(t)for(var i=0,a=t.length;i<a;i++)e.call(n,t[i],i,t)},v=function(n,o){var i={};return m(n,function(t,e){i[e]=n[e]}),m(o,function(t,e){i[e]=o[e]}),i},g=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e},y=function(t){return btoa(encodeURIComponent(t)).replace(/=/g,"")},k=function(t){return"#"==t.substring(0,1)||"rgb"==t.substring(0,3)||"hsl"==t.substring(0,3)},w=function(t){try{return btoa(atob(t))==t}catch(t){return!1}},x={move:function(t,e,n,o){var i;0!==o&&(t.classList.add(d+"-dragged"),t.style.transform="translateX("+o+"px)",0<o?(i=(180-o)/180)<.3&&e.hide(v(n,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),t,"drag"):(i=(180+o)/180)<.3&&e.hide(v(n,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),t,"drag"),(t.style.opacity=i)<.3&&((a||u)&&(t.style.left=o+"px"),t.parentNode.style.opacity=.3,this.stopMoving(t,null)))},startMoving:function(n,o,i,t){t=t||s.event;var e=p?t.touches[0].clientX:t.clientX,a=n.style.transform.replace("px)",""),r=e-(a=a.replace("translateX(",""));i.transitionIn&&n.classList.remove(i.transitionIn),i.transitionInMobile&&n.classList.remove(i.transitionInMobile),n.style.transition="",p?document.ontouchmove=function(t){t.preventDefault();var e=(t=t||s.event).touches[0].clientX-r;x.move(n,o,i,e)}:document.onmousemove=function(t){t.preventDefault();var e=(t=t||s.event).clientX-r;x.move(n,o,i,e)}},stopMoving:function(t,e){p?document.ontouchmove=function(){}:document.onmousemove=function(){},t.style.opacity="",t.style.transform="",t.classList.contains(d+"-dragged")&&(t.classList.remove(d+"-dragged"),t.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout(function(){t.style.transition=""},400))}},_={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,n,o,i,a,r,s,l="",d=0;for(t=_._utf8_encode(t);d<t.length;)i=(e=t.charCodeAt(d++))>>2,a=(3&e)<<4|(n=t.charCodeAt(d++))>>4,r=(15&n)<<2|(o=t.charCodeAt(d++))>>6,s=63&o,isNaN(n)?r=s=64:isNaN(o)&&(s=64),l=l+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(r)+this._keyStr.charAt(s);return l},decode:function(t){var e,n,o,i,a,r,s="",l=0;for(t=t.replace(/[^A-Za-z0-9+/=]/g,"");l<t.length;)e=this._keyStr.indexOf(t.charAt(l++))<<2|(i=this._keyStr.indexOf(t.charAt(l++)))>>4,n=(15&i)<<4|(a=this._keyStr.indexOf(t.charAt(l++)))>>2,o=(3&a)<<6|(r=this._keyStr.indexOf(t.charAt(l++))),s+=String.fromCharCode(e),64!=a&&(s+=String.fromCharCode(n)),64!=r&&(s+=String.fromCharCode(o));return s=_._utf8_decode(s)},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?e+=String.fromCharCode(o):(127<o&&o<2048?e+=String.fromCharCode(o>>6|192):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128)),e+=String.fromCharCode(63&o|128))}return e},_utf8_decode:function(t){for(var e="",n=0,o=c1=c2=0;n<t.length;)(o=t.charCodeAt(n))<128?(e+=String.fromCharCode(o),n++):191<o&&o<224?(c2=t.charCodeAt(n+1),e+=String.fromCharCode((31&o)<<6|63&c2),n+=2):(c2=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),n+=3);return e}};(function(){var t=navigator.userAgent;if(1<=s.navigator.userAgent.indexOf("MSIE")&&(new RegExp("MSIE (\\d+\\.\\d+);").test(t),10!=parseFloat(RegExp.$1)))return!0;return!1})()&&(s.btoa=function(t){return _.encode(t)},s.atob=function(t){return _.decode(t)},"classList"in document.documentElement||Object.defineProperty(s.Element.prototype,"classList",{get:function(){var r=this;function t(e){return function(){var t=r.className.replace(/^\s+|\s+$/g,"");return e(t,arguments)}}function n(t,e,n){for(var o in e){if("string"!=typeof e[o]||~e[o].search(/\s+/g))throw TypeError("the type of value is error");var i=e[o],a=!!~t.search(new RegExp("(\\s+)?"+i+"(\\s+)?"));1===n?!a&&(t+=" "+i):2===n&&a&&(t=t.replace(new RegExp("(\\s+)?"+i),""))}return r.className=t,n}return{add:t(function(t,e){n(t,e,1)}),remove:t(function(t,e){n(t,e,2)}),toggle:function(t){if("string"!=typeof t||0===arguments.length)throw TypeError("Failed to execute 'toggle' on 'DOMTokenList': 1 argument(string) required, but only 0 present.");1!==arguments.length?arguments[1]?this.add(t):this.remove(t):this.contains(t)?this.remove(t):this.add(t)},contains:t(function(t,e){if(0===e.length)throw TypeError("Failed to execute 'contains' on 'DOMTokenList': 1 argument required, but only 0 present.");return"string"==typeof e[0]&&!~e[0].search(/\s+/g)&&!!~t.search(new RegExp(e[0]))}),item:function(t){if("string"==typeof t&&(t=parseInt(t)),0===arguments.length||"number"!=typeof t)throw TypeError("Failed to execute 'toggle' on 'DOMTokenList': 1 argument required, but only 0 present.");var e=r.className.replace(/^\s+|\s+$/,"").split(/\s+/),n=e.length;return t<0||n<=t?null:e[t]}}}})),b.playSound=function(t){if(0!=t.indexOf("http")&&(t="/static/uglcu/notice/"+t+".wav"),s.ActiveXObject||"ActiveXObject"in s){var e=document.noticePlay;e&&e.remove(),(e=document.createElement("embed")).setAttribute("name","noticePlay"),e.setAttribute("src",t),e.setAttribute("autostart",!0),e.setAttribute("loop",!1),e.setAttribute("hidden",!0),document.body.appendChild(e),(e=document.noticePlay).volume=100}else{var n=document.createElement("audio");n.setAttribute("hidden",!0),n.setAttribute("src",t),document.body.appendChild(n),n.addEventListener("ended",function(){n.parentNode.removeChild(n)},!1),n.play()}},m({info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},function(n,t){b[t]=function(t){var e=v(f,t||{});e=v(n,e||{}),this.show(e)}}),l.extend(t,{info:function(t){b.msg(t,{icon:5})},success:function(t){b.msg(t,{icon:1})},error:function(t){b.msg(t,{icon:2})},warning:function(t){b.msg(t,{icon:3})},progress:function(t){return b.msg(t,{icon:4,close:!0})},mute:function(){b.destroy()},toast:function(t){layer.msg(t)},confirm:function(t,e,n,o){var i=!1,a=layer.confirm(t,l.extend({offset:"150px",success:function(e,n){var o=this;o.enterEsc=function(t){return 13===t.keyCode?o.yes.call(o,e,n):27===t.keyCode?o.btn2.call(o,e,n):void 0},r(document).on("keydown",this.enterEsc)},end:function(){r(document).off("keydown",this.enterEsc)}},o),function(){if(!i&&(i=!0,e&&r.isFunction(e))){var t=e();void 0===t&&t||layer.close(a)}},function(){n&&r.isFunction(n)&&n(),layer.close(a)})},notice:function(t){if(t.title=t.title||"",t.message=t.desc||t.message||"",t.type=t.type||"info",t.audio=t.audio+"",t.timeout=void 0===t.timeout?5e3:t.timeout,"close"===t.type)return b.destroy();b[t.type](t)}})}(jQuery,window,uglcw),function(t,e,n){"use strict";var o=n.ui;n.util;kendo.culture("zh-CN"),n.extend(n.ui,{get:function(t){if($(t).data("qui"))return $(t).data("qui");var e=o.attr(t,"role"),n=$(t);return n&&(n=this.create(t,e)),n},create:function(t,e){var n=null;if(void 0!==e){switch(e=e.toLowerCase()){case"textbox":n=new o.TextBox(t);break;case"checkbox":n=new o.CheckBox(t);break;case"radio":n=new o.Radio(t);break;case"numeric":n=new o.Numeric(t);break;case"datepicker":n=new o.DatePicker(t);break;case"datetimepicker":n=new o.DateTimePicker(t);break;case"daterangepicker":n=new o.DateRangePicker(t);break;case"timepicker":n=new o.TimePicker(t);break;case"button":n=new o.Button(t);break;case"buttongroup":n=new o.ButtonGroup(t);break;case"validator":n=new o.Validator(t);break;case"autocomplete":n=new o.AutoComplete(t);break;case"colorpicker":n=new o.ColorPicker(t);break;case"combobox":n=new o.ComboBox(t);break;case"combogrid":n=new o.ComboGrid(t);break;case"dropdownlist":n=new o.DropDownList(t);break;case"dropdowntree":n=new o.DropDownTree(t);break;case"maskedtextbox":n=new o.MaskedTextBox(t);break;case"multiselect":n=new o.MultiSelect(t);break;case"slider":n=new o.Slider(t);break;case"tabs":n=new o.Tabs(t);break;case"grid":n=new o.Grid(t);break;case"grid-advanced":n=new o.AdvancedGrid(t);break;case"tree":n=new o.Tree(t);break;case"tooltip":n=new o.Tooltip(t);break;case"modal":n=new o.Modal(t);break;case"upload":n=new o.Upload(t);break;case"editor":n=new o.Editor(t);break;case"accordion":n=new o.Accordion(t);break;case"wangeditor":n=new o.WangEditor(t);break;case"gridselector":n=new o.GridSelector(t);break;case"tag":n=new o.Tag(t);break;case"album":n=new o.Album(t);break;case"scheduler":n=new o.Scheduler(t);break;case"qrcode":n=new o.QRCode(t);break;case"barcode":n=new o.Barcode(t);break;case"resizable":n=new o.Resizable(t);break;default:console.error("unknown widget",t,e)}return n}console.error("unknown widget ",t,e)}}),n.extend(n.util,{template:kendo.template,toString:kendo.toString,uuid:function(){return kendo.guid().replace(/-/g,"")}})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).defaultOptions={validateOnBlur:!0},i.prototype.init=function(t){o.KUI.prototype.init.call(this,t),this.lazy=t.lazy||!1,e(this._obj).kendoValidator(e.extend(i.defaultOptions,t)),this.initEvent(t)},i.prototype.lazy=function(){return this.lazy},i.prototype.value=function(t){},i.prototype.enable=function(t){},i.prototype.readonly=function(t){},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},i.prototype.validate=function(){return this.k().validate()},i.prototype.clear=function(){return this.k().hideMessages()},n.extend(o,{Validator:i})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;n.extend(o,{loading:function(t){t=t||"body",kendo.ui.progress(e(t),!0)},loaded:function(t){t=t||"body",kendo.ui.progress(e(t),!1)}})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){o.KUI.prototype.init.call(this,t),e(this._obj).kendoTooltip(e.extend({autoHide:!0,position:"top"},t)),this.initEvent(t)},i.prototype.show=function(){this.k().show()},i.prototype.hide=function(){this.k().hide()},i.prototype.value=function(t){},i.prototype.enable=function(t){},i.prototype.readonly=function(t){},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{Tooltip:i})}(jQuery,window,uglcw),function(r,t,s){"use strict";var l=s.ui,d=s.util,c=l.Tooltip;function u(t){l.KUI.call(this,t)}((u.prototype=new l.KUI).constructor=u).defaults={clearable:!0,tooltip:!1},u.prototype.init=function(t){var e=this;t=s.extend({},u.defaults,t),l.KUI.prototype.init.call(this,t);var n=r(this._obj),o="hidden"===n.prop("type");this.hidden=o;var i=n;if(n.is("input")){if(n.removeClass("k-textbox"),n.wrap('<div class="k-textbox '+(t.icon?" k-space-right":"")+'"></div>'),i=r(n.closest(".k-textbox")),o&&i.hide(),t.icon&&n.after('<i class="'+t.icon+'"></i>'),t.clearable){i.addClass("k-textbox-clearable");var a=r('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear" role="button" tabindex="-1"></span>');a.insertAfter(n),a.on("click",function(t){e.value(""),n.trigger("change")}),e.value()||i.find(".k-i-close").addClass("k-hidden"),i.on("mouseenter",function(){r(this).addClass("k-state-hover")}),i.on("mouseleave",function(){r(this).removeClass("k-state-hover")});n.on("change input",function(){e.value()?i.find(".k-i-close").removeClass("k-hidden"):i.find(".k-i-close").addClass("k-hidden")})}i.attr("style",n.attr("style")),n.removeAttr("style")}n.is(":checkbox")?n[0].checked=d.toBoolean(l.attr(this._obj,"value")):n.is("textarea")&&(n.addClass("k-textbox"),n.css("width","100%")),n.is(":disabled")&&this.enable(!1),n.attr("readonly")&&this.readonly(!0),t.tooltip&&new c(i).init({content:l.attr(e._obj,"label")||t.tooltip}),t.change&&t.on("change",t.change),this.initEvent(t)},u.prototype.hidden=function(){return this.hidden},u.prototype.value=function(t){if(void 0===t)return r(this._obj).is(":checkbox")?r(this._obj)[0].checked:r(this._obj).is("input")||r(this._obj).is("textarea")?r(this._obj).val():r(this._obj).html();if(r(this._obj).is(":checkbox"))return r(this._obj)[0].checked=d.toBoolean(t);if(r(this._obj).is("input")||r(this._obj).is("textarea")){var e=r(this._obj).val();r(this._obj).val(t),e!=t&&r(this._obj).trigger("change")}else r(this._obj).html(t)},u.prototype.enable=function(t){if(null==t)return!r(this._obj).prop("disabled");t?r(this._obj).closest(".k-textbox").removeClass("k-state-disabled"):r(this._obj).closest(".k-textbox").addClass("k-state-disabled"),r(this._obj).prop("disabled",!d.toBoolean(t))},u.prototype.readonly=function(t){if(null==t)return!r(this._obj).prop("readonly");t?r(this._obj).closest(".k-textbox").addClass("k-state-disabled"):r(this._obj).closest(".k-textbox").removeClass("k-state-disabled"),r(this._obj).prop("readonly",d.toBoolean(t))},s.extend(l,{TextBox:u})}(jQuery,window,uglcw),function(i,t,a){"use strict";var r=a.ui,s=a.util;function l(t){r.KUI.call(this,t)}l.defaults={type:"number"},((l.prototype=new r.KUI).constructor=l).prototype.init=function(t){var e=a.extend({},l.defaults,t);r.KUI.prototype.init.call(this,e);var n=i(this._obj);if(n.is(":checkbox")){n.addClass("k-checkbox");var o=n.attr("id");o&&i("label[for="+o+"]:not(.control-label)").addClass("k-checkbox-label"),n[0].checked=s.toBoolean(r.attr(this._obj,"value"))}this.options=e,this.initEvent(t)},l.prototype.value=function(t){return null==t?i(this._obj).is(":checkbox")?"number"==this.options.type?s.toInt(i(this._obj)[0].checked):i(this._obj)[0].checked:i(this._obj).val():i(this._obj).is(":checkbox")?i(this._obj)[0].checked=s.toBoolean(t):(i(this._obj).val(t),void i(this._obj).trigger("change"))},l.prototype.enable=function(t){if(null==t)return!i(this._obj).prop("disabled");t?i(this._obj).removeClass("k-state-disabled"):i(this._obj).addClass("k-state-disabled"),i(this._obj).prop("disabled",!s.toBoolean(t))},l.prototype.readonly=function(t){if(null==t)return!i(this._obj).prop("readonly");t?i(this._obj).addClass("k-state-disabled"):i(this._obj).removeClass("k-state-disabled"),i(this._obj).prop("readonly",s.toBoolean(t))},a.extend(r,{CheckBox:l})}(jQuery,window,uglcw),function(l,t,e){"use strict";var d=e.ui,c=e.util;function u(t){d.KUI.call(this,t)}u.defaults={layout:"horizontal",dataTextField:"text",dataValueField:"value",dataSource:[],value:null,disabled:!1,checkDefault:!0},((u.prototype=new d.KUI).constructor=u).prototype.init=function(t){var e=this;d.KUI.prototype.init.call(this,t);var n=l.extend({},u.defaults,t);this.options=n;var o=l(this._obj);o.html(""),o.addClass("uglcw-radio"),"horizontal"===n.layout&&o.addClass("horizontal");var i=d.attr(o,"model"),a=d.attr(o,"value"),r=n.dataSource||[];n.checkDefault&&(a=void 0===a?r[0].value:a);var s=c.template('# for(var i=0; i< data.dataSource.length; i++){ # <li><input type="radio" #= data.dataSource[i].disabled? "disabled": ""#  name="'+i+'" #= data.value== data.dataSource[i].value? "checked": ""#  class="k-radio" id="'+i+'_radio_#= data.dataSource[i].value#" value="#= data.dataSource[i].value#"><label class="k-radio-label" for="'+i+'_radio_#= data.dataSource[i].value#">#=data.dataSource[i].text#</label></li># } #')({value:a,dataSource:r});o.append(s),l(e._obj).find("[type=radio]").on("change",function(){l.isFunction(n.change)&&n.change(e.value())}),this.initEvent(n)},u.prototype.bind=function(t,e){if(void 0===e){var n={};return this.checked()&&(n[t]=this.value()),n}this.value(e[t])},u.prototype.checked=function(){return!!l(this._obj).find("input:radio:checked").length},u.prototype.value=function(t){if(void 0===t)return l(this._obj).find("input:radio:checked").val();if(l(this._obj).find("input:radio:checked").prop("checked",!1),""!==t){var e=l(this._obj).find("input:radio[value="+t+"]");e&&(e.prop("checked",!0),l(this._obj).find("[type=radio]").trigger("change"))}},u.prototype.enable=function(t){if(null==t)return 0===l(this._obj).find("input:radio[disabled]").length;l(this._obj).find("input:radio").prop("disabled",!c.toBoolean(t))},u.prototype.readonly=function(t){if(null==t)return!l(this._obj).find("input:radio[readonly]").prop("readonly");l(this._obj).find("input:radio").prop("readonly",c.toBoolean(t))},e.extend(d,{Radio:u})}(jQuery,window,uglcw),function(f,t,n){"use strict";var o=n.ui,i=o.Tooltip,h=kendo.keys;function a(t){o.KUI.call(this,t)}kendo.ui.NumericTextBox.fn._keydown=function(t){var e=this,n=t.keyCode;(e._key=n)==h.DOWN?e.options.step?e._step(-1):e._change(e.element.val()):e.options.step&&n==h.UP?e.options.step?e._step(1):e._change(e.element.val()):n==h.ENTER?e._change(e.element.val()):n!=h.TAB?e._typing=!0:(n=h.SPACEBAR)&&t.preventDefault()},kendo.ui.NumericTextBox.fn._keypress=function(t){if(0!==t.which&&!t.metaKey&&!t.ctrlKey&&t.keyCode!==h.BACKSPACE&&t.keyCode!==h.ENTER){var e,n=this,o=n.options.min,i=n.element,a=kendo.caret(i),r=a[0],s=a[1],l=String.fromCharCode(t.which),d=n._format(n.options.format),c=n._key===h.NUMPAD_DOT,u=i.val();if(c&&(l=d["."]),u=u.substring(0,r)+l+u.substring(s),(e=n._numericRegex(d).test(u))&&c)i.val(u),kendo.caret(i,r+l.length),t.preventDefault();else if(null!==o&&0<=o&&"-"===u.charAt(0)||!e){n._addInvalidState();var p=f.Event("keyup");return p.which=p.keyCode=t.keyCode,f(document).trigger(p),n._key=0,!1}n._key=0}},((a.prototype=new o.KUI).constructor=a).defaults={spinners:!1,tooltip:!1,step:!1,round:!1},a.prototype.init=function(t){t=n.extend({},a.defaults,t),this.options=t,o.KUI.prototype.init.call(this,t);var e=f(this._obj).kendoNumericTextBox(f.extend({culture:"zh-CHS",decimals:null},t)).data("kendoNumericTextBox");this.initEvent(t),e.wrapper.find(".k-input").on("focus",function(){var t=f(this);clearTimeout(t.data("selectTimeId"));var e=setTimeout(function(){t.select()});t.data("selectTimeId",e)}).blur(function(t){clearTimeout(f(this).data("selectTimeId"))}),t.tooltip&&new i(e.wrapper).init({content:o.attr(this._obj,"label")||t.tooltip})},a.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},a.prototype.enable=function(t){this.k().enable(t)},a.prototype.readonly=function(t){this.k().readonly(t)},a.prototype.k=function(){return kendo.widgetInstance(f(this._obj))},a.prototype.element=function(){return this.k().wrapper},n.extend(o,{Numeric:a})}(jQuery,window,uglcw),function(i,t,a){"use strict";var r=a.ui;function s(t){r.KUI.call(this,t)}((s.prototype=new r.KUI).constructor=s).defaults={culture:"zh-CH",format:"yyyy-MM-dd",editable:!0,dateInput:!0},s.prototype.init=function(t){var e=a.extend({},s.defaults,t);this.options=e,r.KUI.prototype.init.call(this,e),i(this._obj).attr("type","date"),i(this._obj).kendoDatePicker(e);var n=this.k();n.element.on("click",function(){n.open()}),n.wrapper.addClass("k-datepicker-clearable");var o=i('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear" role="button" tabindex="-1"></span>');o.insertBefore(n.wrapper.find(".k-select")),o.on("click",function(t){n.value(null),n.trigger("change")}),n.value()||n.wrapper.find(".k-i-close").addClass("k-hidden"),n.bind("change",function(){this.value()?n.wrapper.find(".k-i-close").removeClass("k-hidden"):n.wrapper.find(".k-i-close").addClass("k-hidden")}),e.editable||i(this._obj).attr("readonly",!0),e.tooltip&&new r.Tooltip(n.wrapper).init({content:r.attr(this._obj,"label")||e.tooltip}),this.initEvent(e)},s.prototype.value=function(t){var e=this.k();if(null==t){var n=e.value();return n?kendo.toString(n,this.options.format||"yyyy-MM-dd"):null}e.value(i.isNumeric(t)?new Date(t):t)},s.prototype.enable=function(t){this.k().enable(t)},s.prototype.readonly=function(t){this.k().readonly(t)},s.prototype.k=function(){return kendo.widgetInstance(i(this._obj))},s.prototype.element=function(){return this.k().wrapper},a.extend(r,{DatePicker:s})}(jQuery,window,uglcw),function(a,t,r){"use strict";var s=r.ui,l=r.util;function d(t){s.KUI.call(this,t)}((d.prototype=new s.KUI).constructor=d).defaults={culture:"zh-CH",format:"yyyy-MM-dd HH:mm:ss",editable:!0,tooltip:!1,ARIATemplate:"选择时间"},d.prototype.init=function(t){var e=l.uuid(),n=r.extend({footer:'<a class="k-link" href="javascript:void(0);" data-uid="'+e+'">选择时间<i style="margin-bottom: 2px;" class="k-icon k-i-clock"></i></a>'},d.defaults,t);this.options=n,s.KUI.prototype.init.call(this,n),a(this._obj).kendoDateTimePicker(n);var o=this.k();o.element.on("click",function(){o.close("time"),o.open(),o.dateView.div.find(".k-footer a.k-link.k-nav-today").off("click"),o.dateView.div.find(".k-footer a.k-link.k-nav-today").on("click",function(t){t.preventDefault()})}),o.wrapper.addClass("k-datepicker-clearable");var i=a('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear" role="button" tabindex="-1"></span>');i.insertBefore(o.wrapper.find(".k-select")),i.on("click",function(t){o.value(null),o.trigger("change")}),o.value()||o.wrapper.find(".k-i-close").addClass("k-hidden"),o.bind("change",function(){this.value()?o.wrapper.find(".k-i-close").removeClass("k-hidden"):o.wrapper.find(".k-i-close").addClass("k-hidden")}),n.tooltip&&new s.Tooltip(o.wrapper).init({content:s.attr(this._obj,"label")||n.tooltip}),a(document).on("click","[data-uid="+e+"]",function(t){t.preventDefault(),t.stopPropagation(),o.close("date"),o.open("time")}),this.initEvent(n)},d.prototype.value=function(t){var e=this.k();if(null==t){var n=e.value();return n?kendo.toString(n,this.options.format||"yyyy-MM-dd HH:mm:ss"):null}e.value(a.isNumeric(t)?new Date(t):t)},d.prototype.enable=function(t){this.k().enable(t)},d.prototype.readonly=function(t){this.k().readonly(t)},d.prototype.k=function(){return kendo.widgetInstance(a(this._obj))},d.prototype.element=function(){return this.k().wrapper},r.extend(s,{DateTimePicker:d})}(jQuery,window,uglcw),function(n,t,e){"use strict";var o=e.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){if(o.KUI.prototype.init.call(this,t),n(this._obj).kendoDateRangePicker(n.extend({culture:"zh-CH",format:"yyyy-MM-dd",editable:!1},t)),t.tooltip){var e=this.k().wrapper;new o.Tooltip(e.find("span.k-dateinput:eq(0)")).init({content:o.attr(this._obj,"label-start")||"开始时间"}),new o.Tooltip(e.find("span.k-dateinput:eq(1)")).init({content:o.attr(this._obj,"label-end")||"结束时间"})}this.initEvent(t)},i.prototype.bind=function(t,e){var n=t.split(","),o=this.k();if(null==e){var i={},a=o.range();return 2==n.length&&(i[n[0]]=kendo.toString(a.start,o.options.format||"yyyy-MM-dd"),i[n[1]]=kendo.toString(a.end,o.options.format||"yyyy-MM-dd")),i}o.range({start:e[n[0]],end:e[n[1]]})},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().readonly(t)},i.prototype.k=function(){return kendo.widgetInstance(n(this._obj))},i.prototype.element=function(){return this.k().wrapper},e.extend(o,{DateRangePicker:i})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).defaults={culture:"zh-CH",format:"HH:mm:ss",editable:!1,tooltip:!1},i.prototype.init=function(t){o.KUI.prototype.init.call(this,t),this.options=e.extend({},i.defaults,t),e(this._obj).kendoTimePicker(this.options),this.options.tooltip&&new o.Tooltip(this.k().wrapper).init({content:o.attr(this._obj,"label")||this.options.tooltip}),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t){var n=e.value();return n?kendo.toString(n,e.options.format||"HH:mm:ss"):null}e.value(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().readonly(t)},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{TimePicker:i})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){o.KUI.prototype.init.call(this,t),e(this._obj).kendoButton(t),t.tooltip&&new o.Tooltip(this._obj).init({content:o.attr(this._obj,"label")||t.tooltip}),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().enable(!t)},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{Button:i})}(jQuery,window,uglcw),function(n,t,e){"use strict";var o=e.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).defaults={selection:"single",tooltip:!1,select:function(t){var e=this;console.log(this,t.indices[0]),setTimeout(function(){n(e.element).find("li:eq("+t.indices[0]+")").removeClass("k-state-active k-state-focused")},100)}},i.prototype.init=function(t){o.KUI.prototype.init.call(this,t),this.options=e.extend({},i.defaults,t),n(this._obj).kendoButtonGroup(this.options),this.options.tooltip&&n(this._obj).find("li").each(function(){var t=n(this);(o.attr(t,"label")||o.attr(t,"tooltip"))&&new o.Tooltip(t).init({content:o.attr(t,"label")||o.attr(t,"tooltip")})}),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().enable(!t)},i.prototype.k=function(){return kendo.widgetInstance(n(this._obj))},i.prototype.element=function(){return this.k().wrapper},e.extend(o,{ButtonGroup:i})}(jQuery,window,uglcw),function(d,t,e){"use strict";var i=e.ui,c=kendo.keys;function a(t){i.KUI.call(this,t)}kendo.ui.AutoComplete.fn._keydown=function(t){var e=this,n=t.keyCode,o=e.listView,i=e.popup.visible(),a=o.focus();if((e._last=n)===c.DOWN)i?this._move(a?"focusNext":"focusFirst"):e.value()&&e._filterSource({value:e.ignoreCase?e.value().toLowerCase():e.value(),operator:e.options.filter,field:e.options.dataTextField,ignoreCase:e.ignoreCase}).done(function(){e._allowOpening()&&(e._resetFocusItem(),e.popup.open())}),t.preventDefault();else if(n===c.UP)i&&this._move(a?"focusPrev":"focusLast"),t.preventDefault();else if(n===c.HOME)this._move("focusFirst");else if(n===c.END)this._move("focusLast");else if(n===c.ENTER||n===c.TAB){if(n===c.ENTER&&i&&t.preventDefault(),i&&a){var r=o.dataItemByIndex(o.getElementIndex(a));if(e.trigger("select",{dataItem:r,item:a}))return;this._select(a)}this._blur()}else if(n===c.ESC)i?t.preventDefault():e._clearValue(),e.close();else if(!e.popup.visible()||n!==c.PAGEDOWN&&n!==c.PAGEUP)if(n===c.SPACEBAR){t.preventDefault();var s=d.Event("keyup");s.which=s.keyCode=t.keyCode,d(document).trigger(s)}else e.popup._hovered=!0,e._search();else{t.preventDefault();var l=n===c.PAGEDOWN?1:-1;o.scrollWith(l*o.screenHeight())}},((a.prototype=new i.KUI).constructor=a).defaults={autoWidth:!0,filter:"contains",highlightFirst:!0,noDataTemplate:"暂无数据",tooltip:!1,icon:"k-i-more-horizontal",selectable:!1},a.prototype.init=function(t){var e=this;i.KUI.prototype.init.call(this,t);var n=d.extend({},a.defaults,t);if(n.url&&(n.dataSource={serverFiltering:!0,schema:d.extend({data:function(t){return t.list||[]}},n.loadFilter),transport:{read:{url:n.url,type:n.type||"get",data:n.data||function(){}}},requestStart:t.requestStart}),d(this._obj).kendoAutoComplete(n),n.tooltip&&new i.Tooltip(e.k().wrapper).init({content:i.attr(e._obj,"label")||n.tooltip}),n.selectable){var o=this.k().wrapper;o.addClass("uglcw-autocomplete-selectable"),d(e._obj).after('<a href="javascript:void(0);" class="k-select k-icon '+n.icon+'"></a>'),d(e._obj).on("dblclick",function(){d.isFunction(n.click)&&n.click.apply(e)}),o.find("."+n.icon).on("click",function(){d.isFunction(n.click)&&n.click.apply(e)})}this.initEvent(n)},a.prototype.value=function(t){var e=this.k();if(void 0===t)return e.value();e.value(t)},a.prototype.enable=function(t){this.k().enable(t)},a.prototype.readonly=function(t){this.k().readonly(t)},a.prototype.k=function(){return kendo.widgetInstance(d(this._obj))},a.prototype.element=function(){return this.k().wrapper},e.extend(i,{AutoComplete:a})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){o.KUI.prototype.init.call(this,t),e(this._obj).kendoColorPicker(t),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();""==t&&(t=null),e.value(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{ColorPicker:i})}(jQuery,window,uglcw),function(s,t,e){"use strict";var o=e.ui,l=kendo.keys;function i(t){o.KUI.call(this,t)}kendo.ui.ComboBox.fn._keydown=function(t){var e=this,n=t.keyCode;if(e._last=n,clearTimeout(e._typingTimeout),e._typingTimeout=null,n===l.HOME)e._firstItem();else if(n===l.END)e._lastItem();else if(n===l.ENTER||n===l.TAB&&e.popup.visible()){var o=e.listView.focus(),i=e.dataItem(),a=!0;if(e.popup.visible()||i&&e.text()===e._text(i)||(o=null),o){if(e.popup.visible()&&t.preventDefault(),(i=e.listView.dataItemByIndex(e.listView.getElementIndex(o)))&&(a=e._value(i)!==kendo.ui.List.unifyType(e.value(),typeof e._value(i))),a&&e.trigger("select",{dataItem:i,item:o}))return;e._userTriggered=!0,e._select(o).done(function(){e._blur(),e._valueBeforeCascade=e._old=e.value()})}else(e._syncValueAndText()||e._isSelect)&&e._accessor(e.input.val()),e.listView.value(e.input.val()),e._blur()}else if(n===l.SPACEBAR){t.preventDefault();var r=s.Event("keyup");r.which=r.keyCode=t.keyCode,s(document).trigger(r)}else n==l.TAB||e._move(t)?n===l.ESC&&!e.popup.visible()&&e.text()&&e._clearValue():e._search()},((i.prototype=new o.KUI).constructor=i).defaults={clearButton:!0,dataTextField:"text",dataValueField:"value",tooltip:!1,allowInput:!1},i.prototype.init=function(t){o.KUI.prototype.init.call(this,t);var e=s.extend({},i.defaults,t);e.url&&(e.dataSource={schema:s.extend({data:function(t){return t.list||[]}},e.loadFilter),transport:s.extend({read:{url:e.url,type:e.type||"get",data:e.data||function(){}}},e.transport)}),s(this._obj).kendoComboBox(e);var n=this.k();n.input.on("focus",function(){n.open()}),n.input.on("click",function(){n.open()}),e.tooltip&&new o.Tooltip(n.wrapper).init({content:o.attr(this._obj,"label")||e.tooltip}),e.allowInput||n.input.attr("readonly",!0).on("keydown",function(t){8===t.keyCode&&t.preventDefault()}),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},i.prototype.dataItem=function(){return this.k().dataItem().toJSON()},i.prototype.bind=function(t,e){if(-1===t.indexOf(","))return void 0!==e?this.value(e[t]):((n={})[t]=this.value(),n);var n,o=t.split(",");return void 0!==e?this.value(e[o[0]]):((n={})[o[0]]=this.value(),n[o[1]]=this.k().text(),n)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().readonly(t)},i.prototype.k=function(){return s(this._obj).data("kendoComboBox")},i.prototype.element=function(){return this.k().wrapper},e.extend(o,{ComboBox:i})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){o.KUI.prototype.init.call(this,t),e(this._obj).kendoMultiColumnComboBox(t),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().readonly(t)},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{ComboGrid:i})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){o.KUI.prototype.init.call(this,t),e(this._obj).kendoDropDownList(t),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().readonly(t)},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{DropDownList:i})}(jQuery,window,uglcw),function(r,t,e){"use strict";var s=e.ui;function l(t){s.KUI.call(this,t)}function d(t,n){t&&r(t).each(function(t,e){e.expanded=r.isFunction(n.expandable)?n.expandable(e):e.expanded,e.checked=r.isFunction(n.checkable)?n.checkable(e):e.checked,e[n.children]&&0<e[n.children].length&&(e.items=e[n.children],delete e[n.children],d(e.items,n))})}((l.prototype=new s.KUI).constructor=l).defaults={dataTextField:"text",dataValueField:"id",autoWidth:!0,filter:"none",noDataTemplate:"暂无数据",children:"children",lazy:!0,initLevel:2,checkAllTemplate:"全选",tooltip:!1},l.prototype.init=function(n){var o=this,i=e.extend({},l.defaults,n);this.options=i,s.KUI.prototype.init.call(this,n);var a={schema:{data:function(t){var e=r.isFunction(n.loadFilter)?n.loadFilter(t):t||[];return i.flat&&(e=util.arrayToTree(e,i.flat)),d(e,i),e},model:{id:i.id||"id",hashChildren:i.hasChildren||function(t){return"closed"===t.state}}},transport:{read:{url:i.url,type:i.type||"get",dataType:"json",data:i.data||function(){}}}};i.url?i.lazy?r.ajax({async:!1,url:i.initUrl||i.url,type:i.dataType||"get",dataType:"json",data:i.data||function(){},success:function(t){var e=r.isFunction(n.loadFilter)?n.loadFilter(t):t||[];i.flat&&(e=util.arrayToTree(e,i.flat)),d(e,o.options),i.dataSource={data:e,schema:{model:{id:i.id||"id",hasChildren:1===i.initLevel?i.hasChildren||function(t){return"closed"===t.state}:"items",children:1===i.initLevel?a:{schema:{data:"items",model:{id:i.id||"id",hasChildren:i.hasChildren||function(t){return"closed"===t.state},children:a}}}}}},i.dataBound=i.dataBound||function(){},r(o._obj).kendoDropDownTree(i),o.initEvent(n)}}):r.ajax({url:i.url,type:i.dataType||"get",dataType:"json",async:!1,data:i.data||function(){},success:function(t){var e=r.isFunction(n.loadFilter)?n.loadFilter(t):t||[];i.flat&&(e=util.arrayToTree(e,i.flat)),d(e,i),i.dataSource=new kendo.data.HierarchicalDataSource({data:e}),r(o._obj).kendoDropDownTree(i),o.initEvent(n)}}):(r(o._obj).kendoDropDownTree(i),o.initEvent(n))},l.prototype._initTooltip=function(){this.options.tooltip&&new s.Tooltip(this.k().wrapper).init({content:s.attr(this._obj,"label")||this.options.tooltip})},l.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},l.prototype.bind=function(t,e){if(-1===t.indexOf(","))return void 0!==e?this.value(e[t]):((n={})[t]=this.value(),n);var n,o=t.split(",");return void 0!==e?(this.k().text(e[o[1]]),this.value(e[o[0]])):((n={})[o[0]]=this.value(),n[o[1]]=this.k().text(),n)},l.prototype.enable=function(t){this.k().enable(t)},l.prototype.readonly=function(t){this.k().readonly(t)},l.prototype.k=function(){return r(this._obj).data("kendoDropDownTree")},l.prototype.element=function(){return this.k().wrapper},e.extend(s,{DropDownTree:l})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){o.KUI.prototype.init.call(this,t),e(this._obj).kendoMaskedTextBox(t),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().readonly(t)},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{MaskedTextBox:i})}(jQuery,window,uglcw),function(n,t,o){"use strict";var i=o.ui;function a(t){i.KUI.call(this,t)}((a.prototype=new i.KUI).constructor=a).defaults={dataTextField:"text",dataValueField:"value",noDataTemplate:"暂无数据",tagMode:"multiple",autoClose:!1,stringify:!0,tooltip:!1},a.prototype.init=function(t){var e=o.extend({},a.defaults,t);(this.options=e).url&&(e.dataSource={schema:n.extend({data:function(t){return t||[]}},e.loadFilter),transport:{read:{url:e.url,type:e.type||"get",data:e.data||function(){}}}}),i.KUI.prototype.init.call(this,e),n(this._obj).kendoMultiSelect(e),e.tooltip&&new i.Tooltip(this.k()).init({content:i.attr(this._obj,"label")||e.tooltip}),this.initEvent(e)},a.prototype.value=function(t){var e=this.k();if(void 0===t)return this.options.stringify?e.value().join(","):e.value();"string"==typeof t&&(t=t.split(",")),e.value(t)},a.prototype.enable=function(t){this.k().enable(t)},a.prototype.dataItems=function(){var t=this.k().dataItems();return n.map(t,function(t){return t.toJSON()})},a.prototype.readonly=function(t){this.k().readonly(t)},a.prototype.k=function(){return kendo.widgetInstance(n(this._obj))},a.prototype.element=function(){return this.k().wrapper},o.extend(i,{MultiSelect:a})}(jQuery,window,uglcw),function(e,t,n){"use strict";var o=n.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).prototype.init=function(t){o.KUI.prototype.init.call(this,t),e(this._obj).kendoSlider(t),this.initEvent(t)},i.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},i.prototype.enable=function(t){},i.prototype.readonly=function(t){},i.prototype.k=function(){return kendo.widgetInstance(e(this._obj))},i.prototype.element=function(){return this.k().wrapper},n.extend(o,{Slider:i})}(jQuery,window,uglcw),function(n,t,e){"use strict";var o=e.ui;function i(t){o.KUI.call(this,t)}((i.prototype=new o.KUI).constructor=i).defaults={scrollable:!0,animation:!1,index:0},i.prototype.init=function(t){o.KUI.prototype.init.call(this,t),n(this._obj).addClass("uglcw-tabstrip");var e=n.extend({},i.defaults,t);n(this._obj).kendoTabStrip(e),n(this._obj).on("mouseenter",".k-item",function(){n(this).find(".k-loading").show().removeClass("k-complete")}),n(this._obj).on("mouseleave",".k-item",function(){n(this).find(".k-loading").hide().addClass("k-complete")}),this.k().select(e.index),this.initEvent(e)},i.prototype.value=function(t){if(void 0===t)return this.select().index();this.select(t)},i.prototype.select=function(t){if(void 0===t)return this.k().select();this.k().select(t)},i.prototype.enable=function(t){this.k().enable(t)},i.prototype.readonly=function(t){this.k().readonly(t)},i.prototype.k=function(){return n(this._obj).data("kendoTabStrip")},i.prototype.element=function(){return this.k().wrapper},e.extend(o,{Tabs:i})}(jQuery,window,uglcw),function($,window,uglcw){"use strict";var ui=uglcw.ui,CONFIRM_DIALOG_CACHE_KEY="_confirm_dialog",STAY_IN_CURRENT_CELL="_stay_in_current_cell",MOVE_ON_CLOSE="_move_on_close",DONT_MOVE_ON_CLOSE="_do_not_move_on_close",EDIT_BY_ENTER="_edit_by_enter",EDIT_BY_CLICK="_edit_by_click";function Grid(t){ui.KUI.call(this,t)}function hintElement(t){var e=kendo.widgetInstance($(t).closest(".uglcw-grid")),n=e.table.clone(),o=e.wrapper.width(),i=$("<div class='k-grid uglcw-grid k-widget uglcw-grid-draggable'></div>").width(o);return n.find("thead").remove(),n.find("tbody").empty(),n.wrap(i),n.append(t.clone().addClass("k-state-selected uglcw-grid-draggable").removeAttr("uid")),n.parent()}function appendAttribute(t,e,n,o){var i=(o=o||"")?o+"Attributes":"attributes";t[i]=t[i]||{};var a=t[i][e]||"";t[i][e]=a?a+" "+n:n}function bindResize(e,t,n){t=t||[];var o=function(){var t=$(e).data("resize_delay");t&&clearTimeout(t),t=setTimeout(function(){var t=$(e);uglcw.ui.get(t).resize()},20),$(e).data("resize_delay",t)};$(window).resize(o),o()}function mergeGrid(a,r){if(a.options.mergeBy&&0<r.length){var s=a.k().dataSource.view().toJSON(),l=0,d=0,c="";$(s).each(function(t,e){var n=[],o=t===s.length-1;$.map(a.options.mergeBy.split(","),function(t){n.push(e[t])});var i=n.join("__");if(console.log("mergeBy:"+i),0===t&&(c=i),d+=1,console.log(d,l,0),c!=i||o){c==i&&(d+=1);1<d&&$(r).each(function(t,e){$(a._obj).find(".uglcw-grid-merged."+e.field).eq(l).attr("rowspan",d-1),$(a._obj).find(".uglcw-grid-merged."+e.field).slice(l+1,l+d-1).addClass("uglcw-hide-cell")}),l=t,c=i,d=1}})}}Grid.prototype=new ui.KUI,Grid.prototype.constructor=Grid,Grid.defaults={serverAggregates:!0,rowNumber:!1,showEditableMark:!0,responsive:[],noRecords:!1,resizable:!0,validate:!0,navigatable:!0,lockable:!0,selectable:!1,align:"center",showHeader:!0,autoBind:!0,pageSize:20,allowCopy:!0,autoSync:!1,autoAppendRow:!0,autoMove:!0,speedy:{className:"",editMode:!1},serverFiltering:!1,minHeight:0},Grid.prototype.init=function(o){if(!this.k()){o=uglcw.extend({},Grid.defaults,o),ui.KUI.prototype.init.call(this,o);var that=this,columns=[],schema={model:{fields:{}}};if(o.id&&(schema.model.id=o.id),o.editable&&(o.editable=$.extend({},{createAt:"bottom",confirmation:!1},o.editable)),o.checkbox){var checkboxColumn={width:35,selectable:!0,locked:o.lockable,type:"checkbox"};checkboxColumn.locked&&appendAttribute(checkboxColumn,"class","uglcw-grid-locked"),appendAttribute(checkboxColumn,"class","uglcw-grid-checkbox"),appendAttribute(checkboxColumn,"class","uglcw-grid-checkbox","header"),columns.push(checkboxColumn),o.selectable=!1}if(o.rowNumber){var numberColumn={width:35,title:"#",locked:o.lockable,template:'<span class="row-number label-circle"></span>'};numberColumn.locked&&appendAttribute(numberColumn,"class","uglcw-grid-locked"),appendAttribute(numberColumn,"style","text-align: center; padding:0;cursor: move;"),appendAttribute(numberColumn,"style","text-align: center; padding:0","header"),appendAttribute(numberColumn,"tabindex",-1),columns.push(numberColumn)}var destroyCmd={name:"Delete",className:"uglcw-grid-cmd-remove",text:"<i class='k-icon k-i-minus'></i>",click:function(t){t.preventDefault();var e=$(t.target).closest("td"),n=$(e).closest("tr"),o=that.k().dataItem(n);uglcw.ui.confirm("是否删除",function(){that.rowIndex=n.index(),that.cellIndex=e.index(),$(that._obj).data(STAY_IN_CURRENT_CELL,!0),that.k().dataSource.remove(o)})}},insertCmd={name:"Add",className:"uglcw-grid-cmd-add",text:"<i class='k-icon k-i-plus'></i>",click:function(t){t.preventDefault();var e=$(t.target).closest("tr").index(),n=$(t.target).closest("td").index();that.rowIndex=e,that.cellIndex=n,that.addRow(null,{index:e+1,move:!1}),that.options.onInsert&&$.isFunction(that.options.onInsert)&&that.options.onInsert.call(that,e+1)}},mergedColumns=[];$(that._obj).find("[data-field]").each(function(index,th){var column={field:$(th).attr("data-field"),editable:function(){return!1}};column.title=($(th).text()||column.field||"").trim();var opts=ui.attr(th,"options")||"";"{"!==opts.charAt(0)&&(opts="{"+opts+"}");try{column=uglcw.extend(column,eval("("+opts+")"))}catch(t){console.error("表格列字段配置解析失败 ["+column.title+"]",opts,t)}if(column.locked=o.lockable&&column.locked,column.locked&&appendAttribute(column,"class","uglcw-grid-locked"),column.merge&&(mergedColumns.push(column),appendAttribute(column,"class","uglcw-grid-merged "+column.field)),column.align=column.align||o.align,column.align&&"checkbox"!==column.type&&(appendAttribute(column,"style","text-align:"+column.align+";"),column.titleAlign||appendAttribute(column,"style","text-align:"+column.align+";","header"),appendAttribute(column,"style","text-align:"+column.align+";","footer")),column.titleAlign&&"checkbox"!==column.type&&appendAttribute(column,"style","text-align:"+column.titleAlign+";","header"),void 0!==column.editable&&!$.isFunction(column.editable)){var editable=column.editable;column.editable=function(){return editable}}if(void 0===column.editor&&void 0===column.schema||(column.editable=function(){return!0}),column.command)if($(that._obj).addClass("uglcw-grid-compact"),$.isArray(column.command)){var kcmd=[];column.command.forEach(function(t){"destroy"===t?kcmd.push(destroyCmd):"create"===t?kcmd.push(insertCmd):kcmd.push(t)}),column.command=kcmd}else"destroy"===column.command?column.command=[destroyCmd]:"create"===column.command&&(column.command=[insertCmd]);column.schema&&("timestamp"===column.schema.type&&(column.template="#= data."+column.field+' == null ? "" : kendo.toString(new Date(data.'+column.field+'), "'+(column.schema.format||"yyyy-MM-dd")+'")#'),"date"===column.schema.type&&(column.template="#= data."+column.field+' == null ? "" : kendo.toString(data.'+column.field+', "'+(column.schema.format||"yyyy-MM-dd")+'")#',column.schema.parse=function(t){return kendo.toString(t,column.format||"yyyy-MM-dd")}),schema.model.fields[column.field]=column.schema,column.schema&&column.editable&&column.editable()&&"number"===column.schema.type&&(column.editor=column.editor||function(t,e){e.model;var n=$('<input data-bind="value:'+e.field+'"/>');n.appendTo(t),new uglcw.ui.Numeric(n).init({decimals:column.schema.decimals||2,format:column.format?column.format.split(":")[1].replace("}",""):"n2"})})),column.tooltip&&(appendAttribute(column,"show-tooltip",!0),column.template=column.template||'<span data-role="#=data.'+column.field+' ? "tooltip": ""#" title="#=data.'+column.field+" === undefined || data."+column.field+' == null ? "" : data.'+column.field+'#">#=data.'+column.field+" === undefined || data."+column.field+' == null ? "" : data.'+column.field+" #</span>"),column.barcode&&(column.template=column.template||'<span class="uglcw-grid-barcode">#= data.'+column.field+' || ""#</span>'),column.qrcode&&(column.template=column.template||'<span class="uglcw-grid-qrcode">#= data.'+column.field+' || ""#</span>'),column.validate&&-1!==column.validate.indexOf("require")&&appendAttribute(column,"class","uglcw-grid-required","header"),column.editable&&column.editable()?(appendAttribute(column,"class","uglcw-grid-editable"),appendAttribute(column,"class","uglcw-grid-editable","header")):column.command||(appendAttribute(column,"tabindex",-1),appendAttribute(column,"class","uglcw-grid-readonly")),columns.push(column)}),this._checkable(columns),this._obj.schema=schema;var opts=uglcw.extend({},Grid.defaults,o,{columns:columns}),dataSourceOptions={data:opts.dataSource||[],autoSync:opts.autoSync,schema:schema};if(opts.url?(dataSourceOptions.schema=$.extend(dataSourceOptions.schema,{data:function(t){return t.rows||[]},total:function(t){return t.total||0},aggregates:function(t){return t.aggregates||{}}},opts.loadFilter),dataSourceOptions.serverPaging=!0,dataSourceOptions.pageSize=opts.pageSize,dataSourceOptions.batch=!0,dataSourceOptions.serverAggregates=opts.serverAggregates,dataSourceOptions.serverFiltering=opts.serverFiltering,dataSourceOptions.transport={read:{url:opts.url,type:opts.type||"get",contentType:opts.contentType,dataType:opts.dataType||"json",data:opts.data||function(t){if(t.rows=t.pageSize,delete t.take,delete t.skip,delete t.aggregate,delete t.pageSize,opts.criteria){var e=ui.bind(opts.criteria);t=uglcw.extend(t,e)}return $.isFunction(opts.query)&&(t=opts.query(t)),t}},create:function(){console.log("on create",arguments)},update:function(){console.log("on update",arguments)},destroy:function(){console.log("on destroy",arguments)},parameterMap:opts.parameterMap}):opts.dataSource&&opts.loadFilter&&($.isFunction(opts.loadFilter)?dataSourceOptions.data=opts.loadFilter(opts.dataSource)||[]:$.isFunction(opts.loadFilter.data)&&(dataSourceOptions.data=opts.loadFilter.data(opts.dataSource)||[])),opts.pageable){var pageSize=opts.pageable.pageSize||20,pageSizes=[10,20,50,100];-1===pageSizes.indexOf(pageSize)&&pageSizes.push(pageSize),opts.pageable=uglcw.extend({input:!0,refresh:!0,pageSize:pageSize,pageSizes:pageSizes,messages:{display:"{0} - {1} 总计:{2}",empty:"当前无数据",page:"跳转至"}},opts.pageable),dataSourceOptions.pageSize=opts.pageable.pageSize}opts.offline&&(dataSourceOptions.offlineStorage=opts.offline+"-"+kendo.guid(this._obj),window.addEventListener("unload",function(){localStorage.removeItem(dataSourceOptions.offlineStorage)})),opts.aggregate&&(dataSourceOptions.aggregate=opts.aggregate),dataSourceOptions.group=opts.group,opts.dataSource=new kendo.data.DataSource(dataSourceOptions),opts.offline&&opts.dataSource.online(!1),$(this._obj).html(""),"small"===opts.size&&$(this._obj).addClass("uglcw-small"),$(this._obj).addClass("uglcw-grid"),opts.showHeader||$(this._obj).addClass("none-header"),this.options=opts,this.options=uglcw.extend({},opts,{cellClose:function(t){var e=$(t.container),n=e.closest("tr"),o=n.is(":last-child"),i=e.is(n.find("td.uglcw-grid-editable:visible:last"));if(that.rowIndex=n.index(),that.cellIndex=e.index(),e.data(EDIT_BY_CLICK)||o&&i&&!e.data(EDIT_BY_ENTER))return e.removeData(EDIT_BY_CLICK),void this.current(e);that.moveToNextCell($(t.container),!0)},saveChanges:function(t){that.saveButtonClicked=!0},dataBinding:function(t){if(opts.editable)if($(that._obj).data("forgetCellIndex"))$(that._obj).removeData("forgetCellIndex");else if(void 0===that.cellIndex||null==that.cellIndex||isNaN(that.cellIndex)){var e=t.sender.current()||[];e[0]&&(that.cellIndex=e.index(),that.rowIndex=e.parent().index())}$.isFunction(opts.dataBinding)&&opts.dataBinding.apply(this,[t])},dataBound:function(t){if($(that._obj).data("_tooltip")||($(that._obj).data("_tooltip",!0),setTimeout(function(){$(that._obj).find(".k-grid-content").kendoTooltip({filter:"[data-role=tooltip]",position:"left",content:function(t){return $(t.target).html()}})},200)),$(that._obj).find(".uglcw-grid-barcode").each(function(){var t=$(this).text();$(this).text(""),new ui.Barcode($(this)).init({value:t})}),$(that._obj).find(".uglcw-grid-qrcode").each(function(){var t=$(this).text();$(this).text(""),new ui.QRCode($(this)).init({value:t})}),that.options.draggable&&setTimeout(function(){i.table.kendoSortable({hint:hintElement,ignore:"input",cursor:"move",placeholder:function(t){return t.clone().addClass("k-state-selected").css("opacity",.65)},container:$(that._obj).find("tbody"),filter:">tbody >tr",change:function(t){var e=i.dataSource.skip()||0,n=t.newIndex+e,o=i.dataSource.getByUid(t.item.data("uid"));i.dataSource.remove(o),o.dirty=!0,i.dataSource.insert(n,o),$(that._obj).find(".k-grid-content tr:eq("+n+")").addClass("k-state-selected")}})},200),that.options.rowNumber){var n=this.element.find(".row-number");$(n).each(function(t){$(this).html(t+1)})}opts.editable&&(void 0===that.cellIndex||null==that.cellIndex||isNaN(that.cellIndex)||(clearTimeout(that.moveTimer),that.moveTimer=setTimeout(function(){$(that._obj).data(STAY_IN_CURRENT_CELL)?(that.moveToCell($(that._obj).find(".k-grid-content tr:eq("+that.rowIndex+") td:eq("+that.cellIndex+")")),$(that._obj).removeData(STAY_IN_CURRENT_CELL)):that.moveToNext(that.rowIndex,that.cellIndex,that.autoAppendRow),that.cellIndex=that.rowIndex=null,that.saveButtonClicked&&(t.sender.table.focus(),that.saveButtonClicked=!1)})));var i=t.sender;n=$(that._obj).find(".k-grid-content>table>tbody>tr");opts.checkbox?($(that._obj).find(".k-grid-content-locked>table>tbody>tr").on("click",function(t){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(that._obj).find(".k-grid-content>table>tbody>tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}),n.on("click",function(t){if(!$(t.target).hasClass("k-checkbox-label")){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(that._obj).find(".k-grid-content>table>tbody>tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}})):n.on("click",function(t){$(that._obj).hasClass("uglcw-grid-locked")&&$(that._obj).find(".k-grid-content-locked>table>tbody>tr").removeClass("k-state-selected");var e=$(t.target).closest("tr");n.removeClass("k-state-selected"),i.select(e)});$(that._obj).find(".k-grid-content td.k-command-edit .k-button").on("click",function(t){t.preventDefault()}),mergeGrid(that,mergedColumns),$.isFunction(opts.dataBound)&&opts.dataBound.apply(this,[t])}});var grid=$(this._obj).kendoGrid(this.options).data("kendoGrid");grid._selectedMap={},grid._selectedItems=[],grid.bind("change",function(){var e,t,n,o=this,i=o.items(),a=o.dataSource.options.schema,r={};if(a&&a.model&&o._data&&(n=$.isFunction(a.model)?a.model.fn.idField:a.model.id)){o.select().each(function(){t=o.dataItem(this),r[t[n]]=!0});for(var s=0;s<i.length;s++)if(t=o.dataItem(i[s]),e=t[n]){var l=!!o._selectedMap[e];if(r[e]&&!l)grid._selectedMap[e]=t,grid._selectedItems.push(t);else if(!r[e]&&l){delete grid._selectedMap[e];var d=grid._selectedItems.findIndex(function(t){return t[n]===e});-1!==d&&grid._selectedItems.splice(d,1)}}}}),$(this._obj).on("dblclick",".k-grid-content>table>tbody>tr,.k-grid-content-locked>table>tbody>tr",function(t){if($.isFunction(that.options.dblclick)){var e=grid.dataItem(this);that.options.dblclick.apply(that,[e])}}),$(this._obj).on("click",".k-grid-content>table>tbody>tr,.k-grid-content-locked>table>tbody>tr",function(t){if($.isFunction(that.options.click)){var e=grid.dataItem(this);that.options.click.apply(that,[e])}}),$(this._obj).on("click","td.uglcw-grid-editable",function(){$(this).data(EDIT_BY_CLICK,!0),$(that._obj).data(STAY_IN_CURRENT_CELL,!0);var t=$(this).index(),e=$(this).closest("tr").index();that.rowIndex=e,that.cellIndex=t}),opts.editable&&grid.table.on("keydown",function(t){var e=!1,n=$(that._obj).find("td.k-state-focused");if(n.length<1){if(!(0<(n=$(that._obj).find("td.k-edit-cell")).length))return;e=!0}var o=n.closest("tr"),i=n.index(),a=o.index(),r=(o.is(":last-child"),n.hasClass("uglcw-grid-editable")),s=t.keyCode;t.keyCode===kendo.keys.ENTER?r?(n.data(EDIT_BY_ENTER,!0),that.rowIndex=a,that.cellIndex=i):n.data("_uglcw_tab_entered")?e||r||(n.removeData("_uglcw_tab_entered"),that.moveToNextCell(n)):n.data("_uglcw_tab_entered",!0):s===kendo.keys.DELETE||s===kendo.keys.UP||kendo.keys.DOWN}),this.initEvent(opts),opts.responsive&&0<opts.responsive.length&&bindResize(this._obj,opts.responsive,opts)}},Grid.prototype._checkable=function(t){var n=!1;$(t).each(function(t,e){if(e.locked)return!(n=!0)}),n?$(this._obj).addClass("uglcw-grid-locked"):$(this._obj).addClass("uglcw-grid-unlocked")},Grid.prototype.moveToCell=function(t){this.k().current($(t))},Grid.prototype.moveToFirstCell=function(){this.moveToCell($(this._obj).find(".k-grid-content tr:eq(0) td:eq(0)"))},Grid.prototype.moveToLastRow=function(){this.moveToCell($(this._obj).find(".k-grid-content tr:last td:eq(0)"))},Grid.prototype.moveToNext=function(t,e,n){this.moveToNextCell($(this._obj).find(".k-grid-content tr:eq("+t+") td:eq("+e+")"),n)},Grid.prototype.moveToNextCell=function(t,e){e=void 0===e||e;var n=this,o=this.k(),i=$(t).closest("td"),a=i.index(),r=i.closest("tr"),s=r.index(),l=".uglcw-grid-editable";n.options.speedy&&n.options.speedy.className&&(l+="."+n.options.speedy.className);var d=n.getNextEditableCell(t,s,a);d||(d=r.is(":last-child")&&e&&n.options.autoAppendRow?(n.addRow(),n.getNextEditableCell(null,s,a)):$(n._obj).find(".k-grid-content tr:eq("+(s+1)+") td"+l+":visible:first")),o.current(d)},Grid.prototype.getNextEditableCell=function(t,e,n){var o,i=this,a=".uglcw-grid-editable";return i.options.speedy&&i.options.speedy.className&&(a+="."+i.options.speedy.className),t?(o=$(t).find("~ "+a+":visible:first"),$(t).hasClass("uglcw-grid-locked")&&(o=$(i._obj).find(".k-grid-content tr:eq("+e+") "+a+":visible:first"))):o=$(i._obj).find(".k-grid-content tr:last td"+a+":visible:first"),0<o.length&&o},Grid.prototype.kInit=function(t){var a=this,r=uglcw.extend({},Grid.defaults,t),n=!1,o=!1,s=[];$(r.columns).each(function(t,e){e.locked&&(o=!0),e.selectable&&(n=!0),e.command&&$(a._obj).addClass("uglcw-grid-compact"),e.merge&&(s.push(e),appendAttribute(e,"class","uglcw-grid-merged "+e.field))}),(r.lockable=o)?$(a._obj).addClass("uglcw-grid-locked"):$(a._obj).addClass("uglcw-grid-unlocked"),r.checkbox=n,r.selectable=!1,this.options=uglcw.extend({},r,{cellClose:function(t){if(r.autoMove){var e=$(t.container),n=e.closest("tr"),o=n.is(":last-child"),i=e.is(".uglcw-grid-editable:visible:last");a.rowIndex=n.index(),a.cellIndex=e.index(),e.data(EDIT_BY_CLICK)||o&&i&&!e.data(EDIT_BY_ENTER)?e.removeData(EDIT_BY_CLICK):a.moveToNextCell($(t.container),!0)}},saveChanges:function(t){a.saveButtonClicked=!0},dataBinding:function(t){if(r.editable)if($(a._obj).data("forgetCellIndex"))$(a._obj).removeData("forgetCellIndex");else if(void 0===a.cellIndex||null==a.cellIndex||isNaN(a.cellIndex)){var e=t.sender.current()||[];e[0]&&(a.cellIndex=e.index(),a.rowIndex=e.parent().index())}$.isFunction(r.dataBinding)&&r.dataBinding.apply(this,[t])},dataBound:function(t){if($(a._obj).data("_tooltip")||($(a._obj).data("_tooltip",!0),setTimeout(function(){$(a._obj).find(".k-grid-content").kendoTooltip({filter:"[data-role=tooltip]",position:"left",content:function(t){return $(t.target).html()}})},200)),$(a._obj).find(".uglcw-grid-barcode").each(function(){var t=$(this).text();$(this).text(""),new ui.Barcode($(this)).init({value:t})}),$(a._obj).find(".uglcw-grid-qrcode").each(function(){var t=$(this).text();$(this).text(""),new ui.QRCode($(this)).init({value:t})}),a.options.draggable&&setTimeout(function(){i.table.kendoSortable({hint:$.noop,cursor:"move",placeholder:function(t){return t.clone().addClass("k-state-hover").css("opacity",.65)},container:$(a._obj).find("tbody"),filter:">tbody >tr",change:function(t){var e=i.dataSource.skip(),n=(t.oldIndex,t.newIndex+e),o=(i.dataSource.data(),i.dataSource.getByUid(t.item.data("uid")));i.dataSource.remove(o),o.dirty=!0,i.dataSource.insert(n,o)}})},200),a.options.rowNumber){var n=this.element.find(".row-number");$(n).each(function(t){$(this).html(t+1)})}r.editable&&(void 0===a.cellIndex||null==a.cellIndex||isNaN(a.cellIndex)||(clearTimeout(a.moveTimer),a.moveTimer=setTimeout(function(){!r.autoMove||$(a._obj).data(STAY_IN_CURRENT_CELL)?(a.moveToCell($(a._obj).find(".k-grid-content tr:eq("+a.rowIndex+") td:eq("+a.cellIndex+")")),$(a._obj).removeData(STAY_IN_CURRENT_CELL)):a.moveToNext(a.rowIndex,a.cellIndex,a.autoAppendRow),a.cellIndex=a.rowIndex=null,a.saveButtonClicked&&(t.sender.table.focus(),a.saveButtonClicked=!1)})));var i=t.sender;if((n=$(a._obj).find(".k-grid-content tr")).unbind("click"),r.checkbox){var e=$(a._obj).find(".k-grid-content-locked tr");e.unbind("click"),e.on("click",function(t){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(a._obj).find(".k-grid-content tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}),n.on("click",function(t){if(!$(t.target).hasClass("k-checkbox-label")){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(a._obj).find(".k-grid-content tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}})}else n.on("click",function(t){$(a._obj).hasClass("qwg-grid-locked")&&$(a._obj).find(".k-grid-content-locked tr").removeClass("k-state-selected");var e=$(t.target).closest("tr");n.removeClass("k-state-selected"),i.select(e)});mergeGrid(a,s),$.isFunction(r.dataBound)&&r.dataBound.apply(this,[t])}}),$(this._obj).kendoGrid(this.options);var c=this.k();c._selectedMap={},c._selectedItems=[],c.bind("change",function(){var e,t,n,o=this,i=o.items(),a=o.dataSource.options.schema,r={};if(a&&a.model&&o._data&&(n=$.isFunction(a.model)?a.model.fn.idField:a.model.id)){o.select().each(function(){t=o.dataItem(this),r[t[n]]=!0});for(var s=0;s<i.length;s++)if(t=o.dataItem(i[s]),e=t[n]){var l=!!c._selectedMap[e];if(r[e]&&!l)c._selectedMap[e]=t,c._selectedItems.push(t);else if(!r[e]&&l){delete c._selectedMap[e];var d=c._selectedItems.findIndex(function(t){return t[n]===e});-1!==d&&c._selectedItems.splice(d,1)}}}}),$(this._obj).on("dblclick",".k-grid-content tr,.k-grid-content-locked tr",function(t){if($.isFunction(a.options.dblclick)){var e=c.dataItem(this);a.options.dblclick.apply(a,[e])}}),$(this._obj).on("click",".k-grid-content tr,.k-grid-content-locked tr",function(t){if($.isFunction(a.options.click)){var e=c.dataItem(this);a.options.click.apply(a,[e])}}),$(this._obj).on("click","td.uglcw-grid-editable",function(){$(this).data(EDIT_BY_CLICK,!0),$(a._obj).data(STAY_IN_CURRENT_CELL,!0);var t=$(this).index(),e=$(this).closest("tr").index();a.rowIndex=e,a.cellIndex=t}),r.responsive&&0<r.responsive.length&&bindResize(this._obj,r.responsive,r)},Grid.prototype.value=function(t){return this.bind(t)},Grid.prototype.bind=function(t,e){if(void 0===t)return this.k().dataSource.data().toJSON();if($.isArray(t))this.k().dataSource.data(t);else if(void 0!==e)this.k().dataSource.data(e[t]||[]);else if("string"==typeof t){var n={};return n[t]=this.k().dataSource.data().toJSON(),n}},Grid.prototype.clearCellIndex=function(){this.rowIndex=null,this.cellIndex=null,$(this._obj).data("forgetCellIndex",!0)},Grid.prototype.addRow=function(t,n){(n=n||{}).move=void 0===n.move||n.move;var o=this;$.isArray(t)?$(t).each(function(t,e){o.options.add&&$.isFunction(o.options.add)&&(e=o.options.add(e)),n.move&&o.clearCellIndex(),void 0!==n.index?o.k().dataSource.insert(n.index,e):o.k().dataSource.add(e)}):(o.options.add&&$.isFunction(o.options.add)&&(t=o.options.add(t||{})),n.move&&o.clearCellIndex(),void 0!==n.index?o.k().dataSource.insert(n.index,t):o.k().dataSource.add(t)),n.move?setTimeout(function(){o.k().table.focus(),o.moveToNextCell()},50):$(o._obj).data(STAY_IN_CURRENT_CELL,!0)},Grid.prototype.cancelRow=function(){this.k().cancelRow()},Grid.prototype.showColumn=function(e){var t=this.k(),n=t.columns.findIndex(function(t){return t.field==e});$(this._obj).find(".uglcw-cell-hide").addClass("uglcw-rendering"),t.showColumn(n),$(this._obj).find(".uglcw-rendering").removeClass("uglcw-rendering")},Grid.prototype.columnIndex=function(e,t){var n=this.k().columns;return void 0!==t&&t||(n=n.filter(function(t){return void 0===t.hidden||!t.hidden})),n.findIndex(function(t){return t.field===e})},Grid.prototype.hideColumn=function(e){var t=this.k(),n=t.columns.findIndex(function(t){return t.field==e});$(this._obj).find(".uglcw-cell-hide").addClass("uglcw-rendering"),t.hideColumn(n),$(this._obj).find(".uglcw-rendering").removeClass("uglcw-rendering")},Grid.prototype.enable=function(t){this.readonly(!t)},Grid.prototype.readonly=function(t){var e=this.k();e.setOptions({editable:!t});var n=e.columns.findIndex(function(t){return t.command});-1!==n&&(t?e.hideColumn(n):e.showColumn(n))},Grid.prototype.selectedRow=function(){var t,n,o=this.k();return o.options.persistSelection?o._selectedItems:((t=$(this._obj).find(".k-grid-content tr.k-state-selected"))&&1<t.length?(n=[],$(t).each(function(t,e){n.push(o.dataItem(e))})):n=(n=o.dataItem(t))?[n]:n,n)},Grid.prototype.clearSelection=function(){this.options.checkbox?this.k().clearSelection():$(this._obj).find(".k-state-selected").removeClass("k-state-selected")},Grid.prototype.removeSelectedRow=function(t,e){var n,o=this,i=this.k(),a=[],r=[];if(i&&(n=$(this._obj).find(".k-grid-content tr.k-state-selected"))&&0<n.length)if(1<n.length)if(t){r=[];$(n).each(function(t,e){var n=i.dataItem(e);a.push(n),r.push(n.uid)}),$(r).each(function(t,e){i.removeRow($(o._obj).find("tr[data-uid="+e+"]"))}),o.moveToLastRow(),$.isFunction(e)&&e(a)}else uglcw.ui.confirm("是否删除选中行？",function(){$(n).each(function(t,e){var n=i.dataItem(e);a.push(n),r.push(n.uid)}),$(r).each(function(t,e){i.removeRow($(o._obj).find("tr[data-uid="+e+"]"))}),o.moveToLastRow(),$.isFunction(e)&&e(a)});else t?(a.push(i.dataItem(n)),i.removeRow(n),o.moveToLastRow(),$.isFunction(e)&&e(a)):uglcw.ui.confirm("是否删除选中行？",function(){a.push(i.dataItem(n)),i.removeRow(n),o.moveToLastRow(),$.isFunction(e)&&e(a)})},Grid.prototype.scrollTop=function(){this.k().content.scrollTop(0)},Grid.prototype.commit=function(t){var e=this,n=this.k();if($(n.dataSource.data()).each(function(t,e){e.dirty=!1}),t&&(e.rowIndex=t.rowIndex||e.rowIndex,e.cellIndex=t.cellIndex||e.cellIndex),!isNaN(e.cellIndex)){var o=$(e._obj).find(".k-grid-content tr:eq("+e.rowIndex+") td:eq("+e.cellIndex+")");o.closest("tr").is(":last-child")&&o.is(".uglcw-grid-editable:visible:last")&&!o.data(EDIT_BY_ENTER)&&$(e._obj).data(STAY_IN_CURRENT_CELL,!0)}n.saveChanges()},Grid.prototype.scrollBottom=function(){var t=this.k();t.content.scrollTop(t.content[0].scrollHeight)},Grid.prototype.reload=function(t){var e=this.k();e.options.autoBind?e.options.pageable?t&&t.stay?e.dataSource.page(e.dataSource.page()):e.dataSource.page(1):e.dataSource.read():e.setOptions({autoBind:!0})},Grid.prototype.k=function(){return kendo.widgetInstance($(this._obj))},Grid.prototype.element=function(){return this.k().wrapper},Grid.prototype.resize=function(t,e){var n=this._obj,o=this.options,i=e||this.options.responsive||[],a=0;t=t||window,$(i).each(function(t,e){a+="number"==typeof e?e:$(e+":visible").height()});var r=$(t).height()-a,s=$(n),l=0;s.children().not(".k-grid-content,.k-grid-content-locked").each(function(){l+=$(this).outerHeight(!0)});var d=r-l;o.minHeight&&(d<o.minHeight&&(r+=o.minHeight-d));s.height(r),s.find(".k-grid-content").height(r-l);var c=s.find(".k-grid-content").hasHScrollBar()?uglcw.util.getScrollBarWidth():0;s.find(".k-grid-content-locked").height(r-l-c);var u=s.find(".k-grid-norecords-template");0<u.length&&$(u).attr("style","position: absolute;");var p=s.find(".k-grid-content-locked"),f=0;0<p.length&&(f=p.width()),s.find(".k-grid-content").width(s.width()-f),s.find(".k-grid-content").hasHScrollBar()&&s.find(".k-grid-content-locked").height(r-l-uglcw.util.getScrollBarWidth())},uglcw.extend(ui,{Grid:Grid})}(jQuery,window,uglcw),function($,window,uglcw){"use strict";var ui=uglcw.ui,Grid=kendo.ui.Grid,uglcwGrid=Grid.extend({init:function(t,e){Grid.fn.init.call(this,t,e)},options:{name:"uglcwGrid"}});function focusTable(t,e){if(!0===e){var n=(t=$(t)).parent().scrollLeft();kendo.focusElement(t),t.parent().scrollLeft(n)}else $(t).one("focusin",function(t){t.preventDefault()}).focus()}kendo.ui.plugin(uglcwGrid);var STAY_IN_CURRENT_CELL="_stay_in_current_cell",EDIT_BY_ENTER="_edit_by_enter",NAVROW="tr:not(.k-footer-template):visible",KEYS=kendo.keys,_tableKeyDown=kendo.ui.uglcwGrid.fn._tableKeyDown;kendo.ui.uglcwGrid.fn._tableKeyDown=function(t){var e,n,o=this.current(),i=o.parent(),a=i.parent(),r=$(t.target);if(t.keyCode===KEYS.UP){if("combobox"!==(n=r.data("role")||r.attr("role"))&&"dropdownlist"!==n){if("autocomplete"===n)if((s=kendo.widgetInstance($(r)))&&s.popup._activated)return _tableKeyDown.call(this,t);if((e=this._prevVerticalCell(a,o))[0]||(this._lastCellIndex=0,a=this._verticalContainer(a),e=this._prevVerticalCell(a,o)),0<e.length)return this._handleEditing(o,e,e.closest("table"))}}else if(t.keyCode===KEYS.DOWN){if("combobox"!==(n=r.data("role")||r.attr("role"))&&"dropdownlist"!==n){var s;if("autocomplete"===n)if((s=kendo.widgetInstance($(r)))&&s.popup._activated)return _tableKeyDown.call(this,t);if((e=this._nextVerticalCell(a,o))[0]||(this._lastCellIndex=0,a=this._verticalContainer(a),e=this._nextVerticalCell(a,o)),0<e.length)return this._handleEditing(o,e,e.closest("table"))}}else if(t.keyCode===KEYS.LEFT){if(r.is("input")&&"combobox"!==(n=r.data("role")||r.attr("role"))&&"dropdownlist"!==n){var l=r.getCursorPosition()||0;if(0!==r.val().length&&0!==l)return}if(d=a.find(NAVROW).index(i),(e=this._prevHorizontalCell(a,o,d))[0]||(a=this._horizontalContainer(a),(e=this._prevHorizontalCell(a,o,d))[0]!==o[0]&&focusTable(a.parent(),!0)),0<e.length)return this._handleEditing(o,e,e.closest("table"))}else if(t.keyCode===KEYS.RIGHT){if(r.is("input")&&"combobox"!==(n=r.data("role")||r.attr("role"))&&"dropdownlist"!==n){l=r.getCursorPosition()||0;if(r.val().length!==l&&0!==l)return}var d=a.find(NAVROW).index(i);if((e=this._nextHorizontalCell(a,o,d))[0]||(a=this._horizontalContainer(a,!0),(e=this._nextHorizontalCell(a,o,d))[0]!==o[0]&&focusTable(a.parent(),!0)),0<e.length)return this._handleEditing(o,e,e.closest("table"))}else if(t.keyCode===KEYS.ESC)return console.log("esc");_tableKeyDown.call(this,t)};var _handleEnterKey=kendo.ui.uglcwGrid.fn._handleEnterKey;function AdvancedGrid(t){ui.KUI.call(this,t)}function hintElement(t){var e=kendo.widgetInstance($(t).closest(".uglcw-grid")),n=e.table.clone(),o=e.wrapper.width(),i=$("<div class='k-grid uglcw-grid k-widget'></div>").width(o);return n.find("thead").remove(),n.find("tbody").empty(),n.wrap(i),n.append(t.clone().addClass("k-state-selected").removeAttr("uid")),n.parent()}function appendAttribute(t,e,n,o){var i=(o=o||"")?o+"Attributes":"attributes";t[i]=t[i]||{};var a=t[i][e]||"";t[i][e]=a?a+" "+n:n}function bindResize(e,t,n){t=t||[];var o=function(){var t=$(e).data("resize_delay");t&&clearTimeout(t),t=setTimeout(function(){var t=$(e);uglcw.ui.get(t).resize()},20),$(e).data("resize_delay",t)};$(window).resize(o),o()}function mergeGrid(a,r){if(a.options.mergeBy&&0<r.length){var s=a.k().dataSource.view().toJSON(),l=0,d=0,c="";$(s).each(function(t,e){var n=[],o=t===s.length-1;$.map(a.options.mergeBy.split(","),function(t){n.push(e[t])});var i=n.join("__");if(0===t&&(c=i),d+=1,console.log(d,l,0),c!=i||o){c==i&&(d+=1);1<d&&$(r).each(function(t,e){$(a._obj).find(".uglcw-grid-merged."+e.field).eq(l).attr("rowspan",d-1),$(a._obj).find(".uglcw-grid-merged."+e.field).slice(l+1,l+d-1).addClass("uglcw-hide-cell")}),l=t,c=i,d=1}})}}kendo.ui.uglcwGrid.fn._handleEnterKey=function(t,e,n){if(t.hasClass("k-edit-cell")){var o=uglcw.ui.get(t.closest(".uglcw-grid")).getNextEditable(t);if(0<o.length)return this._handleEditing(t,o,$(o).closest("table"))}else if(t.hasClass("uglcw-grid-readonly"))return this._moveRight(t,!1,!1,!1,e);return _handleEnterKey.call(this,t,e,n)},AdvancedGrid.prototype=new ui.KUI,AdvancedGrid.prototype.constructor=AdvancedGrid,AdvancedGrid.defaults={serverAggregates:!0,rowNumber:!1,showEditableMark:!0,responsive:[],noRecords:!1,resizable:!0,validate:!0,navigatable:!0,lockable:!0,selectable:!1,align:"center",showHeader:!0,autoBind:!0,pageSize:20,allowCopy:!0,autoSync:!1,autoAppendRow:!0,autoMove:!0,speedy:{className:"",direct:!0},serverFiltering:!1,minHeight:0},AdvancedGrid.prototype.init=function(o){if(!this.k()){o=uglcw.extend({},AdvancedGrid.defaults,o),ui.KUI.prototype.init.call(this,o);var that=this,columns=[],schema={model:{fields:{}}};if(o.id&&(schema.model.id=o.id),o.editable&&(o.editable=$.extend({},{createAt:"bottom"},o.editable)),o.checkbox){var checkboxColumn={width:35,selectable:!0,locked:o.lockable,type:"checkbox"};checkboxColumn.locked&&appendAttribute(checkboxColumn,"class","uglcw-grid-locked uglcw-grid-readonly"),appendAttribute(checkboxColumn,"class","uglcw-grid-checkbox"),appendAttribute(checkboxColumn,"class","uglcw-grid-checkbox","header"),columns.push(checkboxColumn),o.selectable=!1}if(o.rowNumber){var numberColumn={width:35,title:"#",locked:o.lockable,template:'<span class="row-number label-circle"></span>',footerTemplate:'<span class="row-count">'};numberColumn.locked&&appendAttribute(numberColumn,"class","uglcw-grid-locked uglcw-grid-readonly"),appendAttribute(numberColumn,"style","text-align: center; padding:0;cursor: move;"),appendAttribute(numberColumn,"style","text-align: center; padding:0","header"),appendAttribute(numberColumn,"tabindex",-1),columns.push(numberColumn)}var destroyCmd={name:"Delete",className:"uglcw-grid-cmd-remove",text:"<i class='k-icon k-i-minus'></i>",click:function(t){t.preventDefault();var e=$(t.target).closest("td"),n=$(e).closest("tr"),o=that.k().dataItem(n);uglcw.ui.confirm("确定删除吗？",function(){that.k().dataSource.remove(o)},function(){},{btns:["删除","取消"],title:!1,closeBtn:0})}},insertCmd={name:"Add",className:"uglcw-grid-cmd-add",text:"<i class='k-icon k-i-plus'></i>",click:function(t){t.preventDefault();var e=$(t.target).closest("tr").index(),n=$(t.target).closest("td").index();that.rowIndex=e,that.cellIndex=n,that.addRow(null,{index:e+1,move:!1}),that.options.onInsert&&$.isFunction(that.options.onInsert)&&that.options.onInsert.call(that,e+1)}},mergedColumns=[];$(that._obj).find("[data-field]").each(function(index,th){var column={field:$(th).attr("data-field"),editable:function(){return!1}};column.title=($(th).text()||column.field||"").trim();var opts=ui.attr(th,"options")||"";"{"!==opts.charAt(0)&&(opts="{"+opts+"}");try{column=uglcw.extend(column,eval("("+opts+")"))}catch(t){console.error("表格列字段配置解析失败 ["+column.title+"]",opts,t)}if(column.locked=o.lockable&&column.locked,column.locked&&appendAttribute(column,"class","uglcw-grid-locked"),column.merge&&(mergedColumns.push(column),appendAttribute(column,"class","uglcw-grid-merged "+column.field)),column.align=column.align||o.align,column.align&&"checkbox"!==column.type&&(appendAttribute(column,"style","text-align:"+column.align+";"),column.titleAlign||appendAttribute(column,"style","text-align:"+column.align+";","header"),appendAttribute(column,"style","text-align:"+column.align+";","footer")),column.titleAlign&&"checkbox"!==column.type&&appendAttribute(column,"style","text-align:"+column.titleAlign+";","header"),void 0!==column.editable&&!$.isFunction(column.editable)){var editable=column.editable;column.editable=function(){return editable}}if(void 0===column.editor&&void 0===column.schema||(column.editable=function(){return!0}),column.command)if($(that._obj).addClass("uglcw-grid-compact"),$.isArray(column.command)){var kcmd=[];column.command.forEach(function(t){"destroy"===t?kcmd.push(destroyCmd):"create"===t?kcmd.push(insertCmd):kcmd.push(t)}),column.command=kcmd}else"destroy"===column.command?column.command=[destroyCmd]:"create"===column.command&&(column.command=[insertCmd]);column.schema&&("timestamp"===column.schema.type&&(column.template="#= data."+column.field+' == null ? "" : kendo.toString(new Date(data.'+column.field+'), "'+(column.schema.format||"yyyy-MM-dd")+'")#'),"date"===column.schema.type&&(column.template="#= data."+column.field+' == null ? "" : kendo.toString(data.'+column.field+', "'+(column.schema.format||"yyyy-MM-dd")+'")#',column.schema.parse=function(t){return kendo.toString(t,column.format||"yyyy-MM-dd")}),schema.model.fields[column.field]=column.schema,column.schema&&column.editable&&column.editable()&&"number"===column.schema.type&&(column.editor=column.editor||function(t,e){e.model;var n=$('<input data-bind="value:'+e.field+'"/>');n.appendTo(t),new uglcw.ui.Numeric(n).init({decimals:column.schema.decimals||2,format:column.format?column.format.split(":")[1].replace("}",""):"n2"})})),column.tooltip&&(appendAttribute(column,"show-tooltip",!0),column.template=column.template||'<span data-role="#=data.'+column.field+' ? "tooltip": ""#" title="#=data.'+column.field+" === undefined || data."+column.field+' == null ? "" : data.'+column.field+'#">#=data.'+column.field+" === undefined || data."+column.field+' == null ? "" : data.'+column.field+" #</span>"),column.barcode&&(column.template=column.template||'<span class="uglcw-grid-barcode">#= data.'+column.field+' || ""#</span>'),column.qrcode&&(column.template=column.template||'<span class="uglcw-grid-qrcode">#= data.'+column.field+' || ""#</span>'),column.validate&&-1!==column.validate.indexOf("require")&&appendAttribute(column,"class","uglcw-grid-required","header"),column.editable&&column.editable()?(appendAttribute(column,"class","uglcw-grid-editable"),appendAttribute(column,"class","uglcw-grid-editable","header")):column.command||(appendAttribute(column,"tabindex",-1),appendAttribute(column,"class","uglcw-grid-readonly")),columns.push(column)}),this._checkable(columns),this.schema=schema;var opts=uglcw.extend({},AdvancedGrid.defaults,o,{columns:columns}),dataSourceOptions={data:opts.dataSource||[],autoSync:opts.autoSync,schema:schema};if(opts.url?(dataSourceOptions.schema=$.extend(dataSourceOptions.schema,{data:function(t){return t.rows||[]},total:function(t){return t.total||0},aggregates:function(t){return t.aggregates||{}}},opts.loadFilter),dataSourceOptions.serverPaging=!0,dataSourceOptions.pageSize=opts.pageSize,dataSourceOptions.batch=!0,dataSourceOptions.serverAggregates=opts.serverAggregates,dataSourceOptions.serverFiltering=opts.serverFiltering,dataSourceOptions.transport=uglcw.extend({read:{url:opts.url,type:opts.type||"get",contentType:opts.contentType,dataType:opts.dataType||"json",data:opts.data||function(t){if(t.rows=t.pageSize,opts.pageable||(delete t.page,delete t.rows),delete t.take,delete t.skip,delete t.aggregate,delete t.pageSize,opts.criteria){var e=ui.bind(opts.criteria);t=uglcw.extend(t,e)}return $.isFunction(opts.query)&&(t=opts.query(t)),t}},parameterMap:opts.parameterMap},opts.transport)):opts.dataSource&&opts.loadFilter&&($.isFunction(opts.loadFilter)?dataSourceOptions.data=opts.loadFilter(opts.dataSource)||[]:$.isFunction(opts.loadFilter.data)&&(dataSourceOptions.data=opts.loadFilter.data(opts.dataSource)||[])),opts.pageable){var pageSize=opts.pageable.pageSize||20,pageSizes=[10,20,50,100];-1===pageSizes.indexOf(pageSize)&&pageSizes.push(pageSize),opts.pageable=uglcw.extend({input:!0,refresh:!0,pageSize:pageSize,pageSizes:pageSizes,messages:{display:"{0} - {1} 总计:{2}",empty:"当前无数据",page:"跳转至"}},opts.pageable),dataSourceOptions.pageSize=opts.pageable.pageSize}opts.offline&&(dataSourceOptions.offlineStorage=opts.offline+"-"+kendo.guid(this._obj),window.addEventListener("unload",function(){localStorage.removeItem(dataSourceOptions.offlineStorage)})),opts.aggregate&&(dataSourceOptions.aggregate=opts.aggregate,$(dataSourceOptions.aggregate).each(function(t,e){dataSourceOptions.schema.model.fields[e.field]=uglcw.extend(dataSourceOptions.schema.model.fields[e.field],{type:"number"})})),dataSourceOptions.group=opts.group,opts.dataSource=new kendo.data.DataSource(dataSourceOptions),opts.offline&&opts.dataSource.online(!1),$(this._obj).html(""),"small"===opts.size&&$(this._obj).addClass("uglcw-small"),$(this._obj).addClass("uglcw-grid"),opts.showHeader||$(this._obj).addClass("none-header"),this.options=opts,this.options=uglcw.extend({},opts,{dataBound:function(t){if($(that._obj).data("_tooltip")||($(that._obj).data("_tooltip",!0),setTimeout(function(){$(that._obj).find(".k-grid-content").kendoTooltip({filter:"[data-role=tooltip]",position:"left",content:function(t){return $(t.target).html()}})},200)),$(that._obj).find(".uglcw-grid-barcode").each(function(){var t=$(this).text();$(this).text(""),new ui.Barcode($(this)).init({value:t})}),$(that._obj).find(".uglcw-grid-qrcode").each(function(){var t=$(this).text();$(this).text(""),new ui.QRCode($(this)).init({value:t})}),that.options.draggable&&setTimeout(function(){i.table.kendoSortable({hint:hintElement,ignore:"input",cursor:"move",placeholder:function(t){return t.clone().addClass("k-state-selected").css("opacity",.65)},container:$(that._obj).find("tbody"),filter:">tbody >tr",change:function(t){var e=i.dataSource.skip()||0,n=t.newIndex+e,o=i.dataSource.getByUid(t.item.data("uid"));i.dataSource.remove(o),i.dataSource.insert(n,o),$(that._obj).find(".k-grid-content tr:eq("+n+")").addClass("k-state-selected")}})},200),that.options.rowNumber){var n=this.element.find(".row-number");$(n).each(function(t){$(this).html(t+1)})}var i=t.sender;if((n=$(that._obj).find(".k-grid-content>table>tbody>tr")).unbind("click"),opts.checkbox){var e=$(that._obj).find(".k-grid-content-locked>table>tbody>tr");e.unbind("click"),e.on("click",function(t){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(that._obj).find(".k-grid-content>table>tbody>tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}),n.on("click",function(t){if(!$(t.target).hasClass("k-checkbox-label")){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(that._obj).find(".k-grid-content>table>tbody>tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}})}else n.on("click",function(t){$(that._obj).hasClass("uglcw-grid-locked")&&$(that._obj).find(".k-grid-content-locked>table>tbody>tr").removeClass("k-state-selected");var e=$(t.target).closest("tr");n.removeClass("k-state-selected"),i.select(e)});mergeGrid(that,mergedColumns),$.isFunction(opts.dataBound)&&opts.dataBound.apply(this,[t])}});var grid=$(this._obj).kendouglcwGrid(this.options).data("kendouglcwGrid");grid._selectedItems=[],grid._selectedMap={},grid.footerTemplate&&grid.dataSource.bind("change",function(t){t.field&&"itemchange"===t.action&&grid.footerTemplate&&grid._footer()}),grid.bind("change",function(){var e,t,n,o=this,i=o.items(),a=o.dataSource.options.schema,r={};if(a&&a.model&&o._data&&(n=$.isFunction(a.model)?a.model.fn.idField:a.model.id)){o.select().each(function(){t=o.dataItem(this),r[t[n]]=!0});for(var s=0;s<i.length;s++)if(t=o.dataItem(i[s]),e=t[n]){var l=!!grid._selectedMap[e];if(r[e]&&!l)grid._selectedMap[e]=t,grid._selectedItems.push(t);else if(!r[e]&&l){delete grid._selectedMap[e];var d=grid._selectedItems.findIndex(function(t){return t[n]===e});-1!==d&&grid._selectedItems.splice(d,1)}}}}),$(this._obj).on("dblclick",".k-grid-content tr,.k-grid-content-locked tr",function(t){if($.isFunction(that.options.dblclick)){var e=grid.dataItem(this);that.options.dblclick.apply(that,[e])}}),$(this._obj).on("click",".k-grid-content tr,.k-grid-content-locked tr",function(t){if($.isFunction(that.options.click)){var e=grid.dataItem(this);that.options.click.apply(that,[e])}}),this.initEvent(opts),opts.responsive&&0<opts.responsive.length&&bindResize(this._obj,opts.responsive,opts)}},AdvancedGrid.prototype._checkable=function(t){var n=!1;$(t).each(function(t,e){if(e.locked)return!(n=!0)}),n?$(this._obj).addClass("uglcw-grid-locked"):$(this._obj).addClass("uglcw-grid-unlocked")},AdvancedGrid.prototype._renderRow=function(t){for(var e=this.k(),n=e.dataItem(t),o=$(t).children('td[role="gridcell"]'),i=0;i<e.columns.length;i++){var a=e.columns[i],r=a.template,s=o.eq(i);if(void 0!==r){var l=kendo.template(r);s.html(l(n))}else{var d=n[a.field],c=a.format,u=a.values;if(void 0!==u&&null!=u)for(var p=0;p<u.length;p++){var f=u[p];if(f.value==d){s.html(f.text);break}}else void 0!==c?s.html(kendo.format(c,d)):s.html(d)}}0<t.find(".row-number").length&&t.find(".row-number").text($(t).index()+1),e._footer()},AdvancedGrid.prototype.moveToCell=function(t){this.k().current($(t))},AdvancedGrid.prototype.moveToFirstCell=function(){this.moveToCell($(this._obj).find(".k-grid-content tr:eq(0) td:eq(0)"))},AdvancedGrid.prototype.moveToLastRow=function(){this.moveToCell($(this._obj).find(".k-grid-content tr:last td:eq(0)"))},AdvancedGrid.prototype.moveToNext=function(t,e,n){this.moveToNextCell($(this._obj).find(".k-grid-content tr:eq("+t+") td:eq("+e+")"),n)},AdvancedGrid.prototype.moveToNextCell=function(t,e){e=void 0===e||e;var n=this,o=this.k(),i=$(t).closest("td"),a=i.index(),r=i.closest("tr"),s=r.index(),l=".uglcw-grid-editable";n.options.speedy&&n.options.speedy.className&&(l+="."+n.options.speedy.className);var d=n.getNextEditableCell(t,s,a);d||(d=r.is(":last-child")&&e&&n.options.autoAppendRow?(o.closeCell(i),n.addRow(),n.getNextEditableCell(null,s,a)):$(n._obj).find(".k-grid-content tr:eq("+(s+1)+") td"+l+":visible:first")),o._handleEditing(i,d,d.closest("table"))},AdvancedGrid.prototype.getNextEditable=function(t){var e=this,n=this.k(),o=$(t).closest("td"),i=(o.index(),o.closest("tr")),a=i.index(),r=".uglcw-grid-editable";e.options.speedy&&e.options.speedy.className&&(r+="."+e.options.speedy.className);var s=e.getNextEditableCell(t);return s||(i.is(":last-child")&&e.options.autoAppendRow?(n._handleEditing(o,null,n.table),e.addRow(),s=e.getNextEditableCell(null)):0<$(e._obj).find(".k-grid-content-locked").length?(s=$(e._obj).find(".k-grid-content-locked tr:eq("+(a+1)+") td"+r+":visible:first")).length<0&&(s=$(e._obj).find(".k-grid-content tr:eq("+(a+1)+") td"+r+":visible:first")):s=$(e._obj).find(".k-grid-content tr:eq("+(a+1)+") td"+r+":visible:first")),s},AdvancedGrid.prototype.getNextEditableCell=function(t){var e,n=this,o=".uglcw-grid-editable";if(n.options.speedy&&n.options.speedy.className&&(o+="."+n.options.speedy.className),t){var i=$(t).closest("tr").index();e=$(t).find("~ "+o+":visible:first"),$(t).hasClass("uglcw-grid-locked")&&(e=$(n._obj).find(".k-grid-content tr:eq("+i+") "+o+":visible:first"))}else 0<$(n._obj).find(".k-grid-content-locked").length?(e=$(n._obj).find(".k-grid-content-locked tr:last td"+o+":visible:first")).length<0&&(e=$(n._obj).find(".k-grid-content tr:last td"+o+":visible:first")):e=$(n._obj).find(".k-grid-content tr:last td"+o+":visible:first");return 0<e.length&&e},AdvancedGrid.prototype.kInit=function(t){var a=this,o=uglcw.extend({},AdvancedGrid.defaults,t),n=!1,i=!1,r=[];$(o.columns).each(function(t,e){e.locked&&(i=!0),e.selectable&&(n=!0),e.command&&$(a._obj).addClass("uglcw-grid-compact"),e.merge&&(r.push(e),appendAttribute(e,"class","uglcw-grid-merged "+e.field))}),(o.lockable=i)?$(a._obj).addClass("uglcw-grid-locked"):$(a._obj).addClass("uglcw-grid-unlocked"),o.checkbox=n,o.selectable=!1,this.options=uglcw.extend({},o,{dataBound:function(t){if($(a._obj).data("_tooltip")||($(a._obj).data("_tooltip",!0),setTimeout(function(){$(a._obj).find(".k-grid-content").kendoTooltip({filter:"[data-role=tooltip]",position:"left",content:function(t){return $(t.target).html()}})},200)),$(a._obj).find(".uglcw-grid-barcode").each(function(){var t=$(this).text();$(this).text(""),new ui.Barcode($(this)).init({value:t})}),$(a._obj).find(".uglcw-grid-qrcode").each(function(){var t=$(this).text();$(this).text(""),new ui.QRCode($(this)).init({value:t})}),a.options.draggable&&setTimeout(function(){i.table.kendoSortable({hint:$.noop,cursor:"move",placeholder:function(t){return t.clone().addClass("k-state-hover").css("opacity",.65)},container:$(a._obj).find("tbody"),filter:">tbody >tr",change:function(t){var e=i.dataSource.skip(),n=(t.oldIndex,t.newIndex+e),o=(i.dataSource.data(),i.dataSource.getByUid(t.item.data("uid")));i.dataSource.remove(o),i.dataSource.insert(n,o)}})},200),a.options.rowNumber){var n=this.element.find(".row-number");$(n).each(function(t){$(this).html(t+1)})}o.editable&&(void 0===a.cellIndex||null==a.cellIndex||isNaN(a.cellIndex)||(clearTimeout(a.moveTimer),a.moveTimer=setTimeout(function(){!o.autoMove||$(a._obj).data(STAY_IN_CURRENT_CELL)?(a.moveToCell($(a._obj).find(".k-grid-content tr:eq("+a.rowIndex+") td:eq("+a.cellIndex+")")),$(a._obj).removeData(STAY_IN_CURRENT_CELL)):a.moveToNext(a.rowIndex,a.cellIndex,a.autoAppendRow),a.cellIndex=a.rowIndex=null,a.saveButtonClicked&&(t.sender.table.focus(),a.saveButtonClicked=!1)})));var i=t.sender;if((n=$(a._obj).find(".k-grid-content>table>tbody>tr")).unbind("click"),o.checkbox){var e=$(a._obj).find(".k-grid-content-locked>table>tbody>tr");e.unbind("click"),e.on("click",function(t){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(a._obj).find(".k-grid-content>table>tbody>tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}),n.on("click",function(t){if(!$(t.target).hasClass("k-checkbox-label")){var o=$(t.target).closest("tr");if(o.hasClass("k-state-selected")){var e=$(a._obj).find(".k-grid-content>table>tbody>tr.k-state-selected");e=$.grep(e,function(t){var e=i.dataItem(o),n=i.dataItem(t);return e.uid!==n.uid}),i.clearSelection(),i.select(e)}else i.select(o)}})}else n.on("click",function(t){$(a._obj).hasClass("qwg-grid-locked")&&$(a._obj).find(".k-grid-content-locked>table>tbody>tr").removeClass("k-state-selected");var e=$(t.target).closest("tr");n.removeClass("k-state-selected"),i.select(e)});mergeGrid(a,r),$.isFunction(o.dataBound)&&o.dataBound.apply(this,[t])}}),$(this._obj).kendouglcwGrid(this.options)},AdvancedGrid.prototype.value=function(t){return this.bind(t)},AdvancedGrid.prototype.bind=function(t,e){if(void 0===t)return this.k().dataSource.data().toJSON();if($.isArray(t))this.k().dataSource.data(t);else if(void 0!==e)this.k().dataSource.data(e[t]||[]);else if("string"==typeof t){var n={};return n[t]=this.k().dataSource.data().toJSON(),n}},AdvancedGrid.prototype.clearCellIndex=function(){this.rowIndex=null,this.cellIndex=null,$(this._obj).data("forgetCellIndex",!0)},AdvancedGrid.prototype.addRow=function(t,n){(n=n||{}).move=void 0===n.move||n.move;var o=this;$.isArray(t)?$(t).each(function(t,e){o.options.add&&$.isFunction(o.options.add)&&(e=o.options.add(e)),n.move&&o.clearCellIndex(),void 0!==n.index?o.k().dataSource.insert(n.index,e):o.k().dataSource.add(e)}):(o.options.add&&$.isFunction(o.options.add)&&(t=o.options.add(t||{})),n.move&&o.clearCellIndex(),void 0!==n.index?o.k().dataSource.insert(n.index,t):o.k().dataSource.add(t)),n.move?setTimeout(function(){o.k().table.focus(),o.moveToNextCell()},50):$(o._obj).data(STAY_IN_CURRENT_CELL,!0)},AdvancedGrid.prototype.cancelRow=function(){this.k().cancelRow()},AdvancedGrid.prototype.showColumn=function(e){var t=this.k(),n=t.columns.findIndex(function(t){return t.field==e});$(this._obj).find(".uglcw-cell-hide").addClass("uglcw-rendering"),t.showColumn(n),$(this._obj).find(".uglcw-rendering").removeClass("uglcw-rendering")},AdvancedGrid.prototype.columnIndex=function(e,t){var n=this.k().columns;return void 0!==t&&t||(n=n.filter(function(t){return void 0===t.hidden||!t.hidden})),n.findIndex(function(t){return t.field===e})},AdvancedGrid.prototype.hideColumn=function(e){var t=this.k(),n=t.columns.findIndex(function(t){return t.field==e});$(this._obj).find(".uglcw-cell-hide").addClass("uglcw-rendering"),t.hideColumn(n),$(this._obj).find(".uglcw-rendering").removeClass("uglcw-rendering")},AdvancedGrid.prototype.enable=function(t){this.readonly(!t)},AdvancedGrid.prototype.readonly=function(t){var e=this.k();e.setOptions({editable:!t});var n=e.columns.findIndex(function(t){return t.command});-1!==n&&(t?e.hideColumn(n):e.showColumn(n))},AdvancedGrid.prototype.selectedRow=function(){var t,n,o=this.k();return o.options.persistSelection?o._selectedItems:((t=$(this._obj).find(".k-grid-content tr.k-state-selected"))&&1<t.length?(n=[],$(t).each(function(t,e){n.push(o.dataItem(e))})):n=(n=o.dataItem(t))?[n]:n,n)},AdvancedGrid.prototype.clearSelection=function(){this.options.checkbox?this.k().clearSelection():$(this._obj).find(".k-state-selected").removeClass("k-state-selected")},AdvancedGrid.prototype.removeSelectedRow=function(t,e){var n,o=this,i=this.k(),a=[],r=[];i&&(n=$(this._obj).find(".k-grid-content tr.k-state-selected"))&&0<n.length&&(1<n.length?t?($(n).each(function(t,e){var n=i.dataItem(e);a.push(n),r.push(n.uid)}),$(r).each(function(t,e){i.removeRow($(o._obj).find("tr[data-uid="+e+"]"))}),o.moveToLastRow(),$.isFunction(e)&&e(a)):uglcw.ui.confirm("是否删除选中行？",function(){$(n).each(function(t,e){var n=i.dataItem(e);a.push(n),r.push(n.uid)}),$(r).each(function(t,e){i.removeRow($(o._obj).find("tr[data-uid="+e+"]"))}),o.moveToLastRow(),$.isFunction(e)&&e(a)}):t?(a.push(i.dataItem(n)),i.removeRow(n),o.moveToLastRow(),$.isFunction(e)&&e(a)):uglcw.ui.confirm("是否删除选中行？",function(){a.push(i.dataItem(n)),i.removeRow(n),o.moveToLastRow(),$.isFunction(e)&&e(a)}))},AdvancedGrid.prototype.scrollTop=function(){this.k().content.scrollTop(0)},AdvancedGrid.prototype.commit=function(t){var e=this,n=this.k();if($(n.dataSource.data()).each(function(t,e){e.dirty=!1}),t&&(e.rowIndex=t.rowIndex||e.rowIndex,e.cellIndex=t.cellIndex||e.cellIndex),!isNaN(e.cellIndex)){var o=$(e._obj).find(".k-grid-content tr:eq("+e.rowIndex+") td:eq("+e.cellIndex+")");o.closest("tr").is(":last-child")&&o.is(".uglcw-grid-editable:visible:last")&&!o.data(EDIT_BY_ENTER)&&$(e._obj).data(STAY_IN_CURRENT_CELL,!0)}n.saveChanges()},AdvancedGrid.prototype.scrollBottom=function(){var t=this.k();t.content.scrollTop(t.content[0].scrollHeight)},AdvancedGrid.prototype.reload=function(t){var e=this.k();e.options.autoBind?e.options.pageable?t&&t.stay?e.dataSource.page(e.dataSource.page()):e.dataSource.page(1):e.dataSource.read():e.setOptions({autoBind:!0})},AdvancedGrid.prototype.k=function(){return kendo.widgetInstance($(this._obj))},AdvancedGrid.prototype.element=function(){return this.k().wrapper},AdvancedGrid.prototype.resize=function(t,e){var n=this._obj,o=this.options,i=e||this.options.responsive||[];t=t||window;var a=0;$(i).each(function(t,e){a+="number"==typeof e?e:$(e+":visible").height()});var r=$(t).height()-a,s=$(n),l=0;s.children().not(".k-grid-content,.k-grid-content-locked").each(function(){l+=$(this).outerHeight(!0)});var d=r-l;o.minHeight&&(d<o.minHeight&&(r+=o.minHeight-d));s.height(r),s.find(".k-grid-content").height(r-l);var c=s.find(".k-grid-content").hasHScrollBar()?17:0;s.find(".k-grid-content-locked").height(r-l-c);var u=s.find(".k-grid-norecords-template");0<u.length&&$(u).attr("style","position: absolute;");var p=s.find(".k-grid-content-locked"),f=0;0<p.length&&(f=p.width()+2),s.find(".k-grid-content").width(s.width()-f),s.find(".k-grid-header").attr("style","padding-right: 17px;")},uglcw.extend(ui,{AdvancedGrid:AdvancedGrid})}(jQuery,window,uglcw),function(s,t,e){"use strict";var l=e.ui,d=e.util;function c(t){l.KUI.call(this,t)}function u(t,n){t&&s(t).each(function(t,e){e.expanded=s.isFunction(n.expandable)?n.expandable(e):e.expanded,e.checked=s.isFunction(n.checkable)?n.checkable(e):e.checked,e[n.children]&&0<e[n.children].length&&(e.items=e[n.children],delete e[n.children],u(e.items,n))})}((c.prototype=new l.KUI).constructor=c).defaults={flat:!1,dataTextField:"text",selection:"multiple",autoWith:!0,filter:"contains",noDataTemplate:"暂无数据",children:"children",lazy:!0,toJSON:!0,initLevel:2},c.prototype.init=function(n){var o=this;l.KUI.prototype.init.call(this,n);var i=s.extend({},c.defaults,n);if(i.checkbox&&"single"===i.selection){var a=i.check;i.checkboxes=!0,i.check=function(t){var e=this.dataItem(t.node);!function t(e,n){for(var o=0;o<e.length;o++){var i=e[o],a=i.hasChildren&&i.children.data();n(i),a&&t(a,n)}}(this.dataSource.data(),function(t){t!=e&&t.set("checked",!1)}),s.isFunction(a)&&a.call(this,t)}}var r={schema:{data:function(t){var e=s.isFunction(n.loadFilter)?n.loadFilter(t):t||[];return i.flat&&(e=d.arrayToTree(e,i.flat)),u(e,i),e},model:{id:(this.options=i).id||"id",hashChildren:i.hasChildren||function(t){return"closed"===t.state}}},transport:{read:{url:i.url,type:i.type||"get",dataType:"json",data:i.data||function(){}}}};i.url?i.lazy?s.ajax({url:i.url,type:i.dataType||"get",dataType:"json",data:i.data||function(){},success:function(t){var e=s.isFunction(n.loadFilter)?n.loadFilter(t):t||[];i.flat&&(e=d.arrayToTree(e,i.flat)),u(e,o.options),i.dataSource={data:e,schema:{model:{id:i.id||"id",hasChildren:1===i.initLevel?i.hasChildren||function(t){return"closed"===t.state}:"items",children:1===i.initLevel?r:{schema:{data:"items",model:{id:i.id||"id",hasChildren:i.hasChildren||function(t){return"closed"===t.state},children:r}}}}}},i.dataBound=i.dataBound||function(){},s(o._obj).kendoTreeView(i),o.initEvent(n)}}):s.ajax({url:i.url,type:i.dataType||"get",dataType:"json",async:!1,data:i.data||function(){},success:function(t){var e=s.isFunction(n.loadFilter)?n.loadFilter(t):t||[];i.flat&&(e=d.arrayToTree(e,i.flat)),u(e,i),i.dataSource=new kendo.data.HierarchicalDataSource({data:e}),i.loadOnDemand=!1,s(o._obj).kendoTreeView(i),o.initEvent(n)}}):(s(o._obj).kendoTreeView(i),o.initEvent(n)),s(o._obj).on("click","li .k-state-selected",function(t){var e=o.k(),n=s(this).closest("li")[0];e.trigger("select",{node:n})})},c.prototype.reload=function(t){var n=this,o=n.options,i=o;o.id,o.hasChildren,o.url,o.type,o.data;o.url?o.lazy?s.ajax({url:o.url,type:o.dataType||"get",dataType:"json",data:o.data||function(){},success:function(t){var e=s.isFunction(i.loadFilter)?i.loadFilter(t):t||[];o.flat&&(e=d.arrayToTree(e,o.flat)),u(e,n.options),o.dataSource={data:e,schema:{model:{id:o.id||"id",hasChildren:"items",children:{schema:{data:"items",model:{id:o.id||"id",hasChildren:o.hasChildren||function(t){return"closed"==t.state},children:{schema:{data:function(t){var e=s.isFunction(i.loadFilter)?i.loadFilter(t):t||[];return o.flat&&(e=d.arrayToTree(e,o.flat)),u(e,o),e},model:{id:o.id||"id",hashChildren:o.hasChildren||function(t){return"closed"==t.state}}},transport:{read:{url:o.url,type:o.type||"get",dataType:"json",data:o.data||function(){}}}}}}}}}},o.dataBound=o.dataBound||function(){},n.k().setDataSource(new kendo.data.HierarchicalDataSource(o.dataSource))}}):s.ajax({url:o.url,type:o.dataType||"get",dataType:"json",async:!1,data:o.data||function(){},success:function(t){var e=s.isFunction(i.loadFilter)?i.loadFilter(t):t||[];o.flat&&(e=d.arrayToTree(e,o.flat)),u(e,o),o.dataSource=new kendo.data.HierarchicalDataSource({data:e}),n.k().setDataSource(o.dataSource)}}):n.k().dataSource.read()},c.prototype.selectedNodes=function(){var a=this,r=[];return function i(t){s(t).each(function(t,e){var n=s(a._obj).find("#_"+e.uid).closest("li.k-item").attr("aria-checked");if("true"===n||"mixed"===n){var o=a.options.toJSON?e.toJSON():e;delete o.items,"mixed"===n&&(o.halfChecked=!0),r.push(o)}e.hasChildren&&i(e.children.view())})}(this.k().dataSource.view()),r},c.prototype.nodes=function(t){var a=this,r=[];return t?function i(t){s(t).each(function(t,e){var n=s(a._obj).find("#_"+e.uid).closest("li.k-item").attr("aria-checked"),o=e.toJSON();"true"===n&&(o.checked=!0),"mixed"===n&&(o.halfChecked=!0),r.push(o),e.hasChildren&&i(e.children.view())})}(this.k().dataSource.view()):r=this.k().dataSource.view().toJSON(),r},c.prototype.selectedIds=function(){return s.map(this.selectedNodes(),function(t){return t.id})},c.prototype.expand=function(t){this.k().expand(t||".k-item")},c.prototype.collapse=function(t){this.k().collapse(t||".k-item")},c.prototype.clearSelection=function(){var t=this.k();t.select(s()),t.options.checkboxes&&s(this._obj).find(".k-checkbox-wrapper input").prop("checked",!1).trigger("change")},c.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},c.prototype.enable=function(t){this.k().enable(t)},c.prototype.readonly=function(t){this.k().readonly(t)},c.prototype.k=function(){return kendo.widgetInstance(s(this._obj))},c.prototype.element=function(){return this.k().wrapper},e.extend(l,{Tree:c})}(jQuery,window,uglcw),function(n,t,o){"use strict";var i=o.ui;function a(t){i.KUI.call(this,t)}((a.prototype=new i.KUI).constructor=a).defaults={showFileList:!0,dropZone:".drop-zone",field:"file"},a.prototype.init=function(t){i.KUI.prototype.init.call(this,t);var e=o.extend({},a.defaults,{async:{saveUrl:t.url,saveField:t.field,autoUpload:t.autoUpload},success:function(t){},select:function(t,e){}},t);n(this._obj).kendoUpload(e).data("kendoUpload"),this.initEvent(e)},a.prototype.upload=function(){this.k().upload()},a.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},a.prototype.enable=function(t){this.readonly(!t)},a.prototype.readonly=function(t){this.k()},a.prototype.k=function(){return n(this._obj).data("kendoUpload")},a.prototype.element=function(){return this.k().wrapper},o.extend(i,{Upload:a})}(jQuery,window,uglcw),function(c,r,u){"use strict";var p=u.ui;function s(t){p.BaseUI.call(this,t)}((s.prototype=new p.BaseUI).constructor=s).prototype.init=function(t){p.BaseUI.prototype.init.call(this,t),this.initEvent(t)},s.defaults={title:"标题",content:"",area:"500px",okText:"确定",cancelText:"取消",resizable:!0,closable:!0,full:!1,shade:.3,shadeClose:!1,scrollbar:!1,btnAlign:"r",maxmin:!0,ok:function(){},cancel:function(){}},s.open=function(t){var o=c.extend({},s.defaults,t),e=1;o.url&&(e=2,o.content=o.url);var n={id:o.id,type:e,title:o.title,resize:o.resizable,closeBtn:o.closable,btnAlign:o.btnAlign,offset:o.offset,area:o.area,content:o.content,shade:o.shade,anim:o.anim||0,shadeClose:o.shadeClose,moveOut:o.moveOut,move:o.move,btn:void 0===o.btns?[o.okText,o.cancelText]:o.btns,scrollbar:o.scrollbar,fixed:o.fixed,maxmin:o.maxmin,full:o.fullscreen,min:o.min,restore:o.restore,success:function(t,e){o.full&&(layer.full(e),c.isFunction(o.fullscreen)&&setTimeout(function(){o.fullscreen.call(o,t)},200)),o.url&&layer.iframeAuto(e),o.success&&c.isFunction(o.success)&&o.success(t,e)},yes:function(t,e){o.__yes||(o.__yes=!0,o.yes&&c.isFunction(o.yes)&&(!1!==o.yes(e,t)?layer.close(t):o.__yes=!1))},cancel:function(t,e){return!o.cancel||!c.isFunction(o.cancel)||o.cancel(e,t)},btn2:function(t,e){if(!o.__btn2)return o.__btn2=!0,!o.btn2||!c.isFunction(o.btn2)||o.btn2(e,t)},btn3:function(t,e){if(!o.__btn3){if(o.__btn3=!0,o.btn3&&c.isFunction(o.btn3)){var n=o.btn3(e,t);return o.__btn3=!1,n}return!0}},resizing:function(t){var e=c(t).data("resize_delay");e&&r.clearTimeout(e),o.resizing&&c.isFunction(o.resizing)&&c(t).data("resize_delay",setTimeout(function(){o.resizing(t)},200))}};if(o.btns){var i=c.map(o.btns,function(t,e){return"string"==typeof t?t:"object"==typeof t?(0===e?n.yes=t.click:n["btn"+(e+1)]=t.click,t.name):void 0});n.btn=i}var a=layer.open(n);return u.currentModal=a},s.close=function(t){t=void 0===t?layer.index:t;layer.close(t)},s.showGridSelector=function(a){return a=u.extend({persistSelection:!0,clearSelection:!1,pageable:!0},a),s.open({size:a.size||"small",title:void 0===a.title?"请选择":a.title,closable:a.closable,area:a.area||[a.width?a.width+"px":"650px",a.height?a.height+"px":"350px"],moveOut:!0,resizable:a.resizable,maxmin:void 0!==a.maxmin&&a.maxmin,scrollbar:!1,content:'<div class="uglcw-selector-container"><div class="criteria"></div><div class="uglcw-grid uglcw-small"></div></div>',success:function(n){var t=c(n).find(".layui-layer-content").height(),o=a.columns||[];a.checkbox&&o.splice(0,0,{width:35,selectable:!0,type:"checkbox",locked:!0,attributes:{class:"uglcw-grid-checkbox"},headerAttributes:{class:"uglcw-grid-checkbox"}}),a.criteria&&(c(n).find(".criteria").html(a.criteria),c(n).find(".criteria").append('<button class="k-info search-btn" uglcw-role="button">搜索</button>'),u.ui.init(c(n).find(".criteria")),u.ui.get(c(n).find(".criteria .search-btn")).on("click",function(){u.ui.get(c(n).find(".uglcw-grid")).reload()})),c(o).each(function(t,e){e.tooltip&&(e.attributes=o.attributes||{},e.attributes["show-tooltip"]=!0)});var i=c(n).find(".uglcw-grid"),e=new p.Grid(i);e.kInit({height:t-c(n).find(".criteria").height()-15,dataSource:{schema:c.extend({model:{id:a.id||"id"},data:function(t){return t.rows||[]},total:function(t){return t.total||0},aggregates:function(t){return t.aggregates||{}}},a.loadFilter),transport:{read:{url:a.url,data:function(t){t.rows=t.pageSize,delete t.take,delete t.skip,delete t.aggregate,delete t.pageSize;var e=p.bind(c(n).find(".criteria"));return t=u.extend(t,e),c.isFunction(a.query)&&(t=a.query(t)),t}}},serverAggregates:!0,serverPaging:!0,pageSize:a.pageSize||20},pageable:!!a.pageable&&u.extend({numeric:!0,refresh:!0,input:!0,pageSize:a.pageSize,buttonCount:3,messages:{display:"总计:{2}",empty:"当前无数据",page:"跳转至"},pageSizes:[10,20,50,100]},a.pageable),columns:o,aggregate:a.aggregate,dataBound:function(t){a.dataBound&&c.isFunction(a.dataBound)&&a.dataBound(t),i.data("__tooltip")||(i.data("__tooltip",!0),setTimeout(function(){i.find(".k-grid-content").kendoTooltip({filter:"td[show-tooltip=true]",position:"left",content:function(t){return c(t.target).html()}})},200))}}),i.on("dblclick","tbody tr",function(){var t=p.get(i).k().dataItem(c(this));if(a.yes&&c.isFunction(a.yes)){var e=a.yes([t]);(void 0===e||e)&&p.Modal.close()}}),c.isFunction(a.success)&&a.success(n,e)},btns:void 0===a.btns?["选中并继续","确定","取消"]:a.btns,yes:function(t){var e=p.get(c(t).find(".uglcw-grid")),n=e.selectedRow();if(a.clearSelection&&e.clearSelection(),a.yes&&c.isFunction(a.yes))return a.yes(n),a.clearSelection&&e.clearSelection(),!1},btn2:function(t){if(a.btns){if(a.btn2&&c.isFunction(a.btn2))return a.btn2(t)}else{var e=p.get(c(t).find(".uglcw-grid")).selectedRow();if(a.yes&&c.isFunction(a.yes))return a.yes(e)}return!0},btn3:function(t){return!0},resizing:function(t){var e=c(t).find(".uglcw-grid"),n=u.ui.get(e).k(),o=c(c(t).find(".layui-layer-content")).height()-c(c(t).find(".criteria")).height()-18;n.setOptions({height:o})}})},s.showTreeSelector=function(o){return s.open({offset:o.offset,closable:o.closable,btns:o.btns,maxmin:void 0!==o.maxmin&&o.maxmin,okText:o.okText,title:void 0===o.title?"请选择":o.title,area:o.area||"300px",content:'<div class="uglcw-selector-container"><div class="uglcw-tree"></div></div>',success:function(t){new p.Tree(c(t).find(".uglcw-tree")).init(u.extend({lazy:o.lazy,expand:o.expand,id:o.id||"id",url:o.url,selection:o.selection,data:o.data,autoScroll:o.autoScroll||!0,checkbox:void 0===o.checkbox||o.checkbox,checkboxes:o.checkboxes||{checkChildren:!0},hasChildren:o.hasChildren||function(t){return"closed"==t.state}},o)),c.isFunction(o.success)&&o.success(t)},yes:function(t){var e=p.get(c(t).find(".uglcw-tree")),n=e.selectedNodes();o.yes&&c.isFunction(o.yes)&&o.yes(n,e.nodes(),e.nodes(!0))},btn2:o.btn2||function(t){},btn1:o.btn1,cancel:o.cancel})},s.showTreeGridSelector=function(d){return d=u.extend({clearSelection:!1,persistSelection:!0},d),s.open({closable:d.closable,title:void 0===d.title?"请选择":d.title,area:void 0===d.area?d.width?d.width+"px":"800px":d.area,moveOut:!0,scrollbar:!1,resizable:d.resizable,maxmin:void 0!==d.maxmin&&d.maxmin,content:'<div class="uglcw-selector-container"><div><div class="col-xs-5" style="padding-top: 20px;padding-right: 0px;"><div style="overflow-y: auto; height: 370px;" class="uglcw-tree"></div></div><div class="col-xs-19" style="padding-left: 5px;"><div class="criteria"></div><div class="uglcw-grid uglcw-small"></div></div></div></div>',success:function(t){var e=c(t).find(".layui-layer-content").height(),n=c(t).find(".uglcw-tree");n.css("height",e-25+"px");var a=c(t).find(".uglcw-grid"),o=c(t).find(".criteria"),i=u.extend({select:function(t){var e=this.dataItem(t.node)[d.tree.id||"id"],n={};n[d.tree.model||"typeId"]=e,p.bind(o,n),p.get(a).reload()}},d.tree);o.append('<input uglcw-model="'+(d.tree.model||"typeId")+'"  uglcw-role="textbox" type="hidden">');var r=new p.Tree(n);r.init(i);var s=d.columns||[];d.checkbox&&s.splice(0,0,{width:35,selectable:!0,type:"checkbox",locked:!0,attributes:{class:"uglcw-grid-checkbox"},headerAttributes:{class:"uglcw-grid-checkbox"}}),d.criteria&&(o.append(d.criteria),o.append('<button class="k-info search-btn" uglcw-role="button">搜索</button>'),u.ui.init(o),u.ui.get(o.find(".search-btn")).on("click",function(){u.ui.get(c(t).find(".uglcw-grid")).reload()})),c(s).each(function(t,e){e.tooltip&&(e.attributes=s.attributes||{},e.attributes["show-tooltip"]=!0)});var l=new p.Grid(a);l.kInit({aggregate:d.aggregate,persistSelection:d.persistSelection,height:e-c(t).find(".criteria").height()-15,size:d.size||"small",dataSource:{schema:c.extend({model:{id:d.id||"id"},data:function(t){return t.rows||[]},total:function(t){return t.total||0},aggregates:function(t){return t.aggregates||{}}},d.loadFilter),transport:{read:{url:d.url,data:function(t){t.rows=t.pageSize,delete t.take,delete t.skip,delete t.aggregate,delete t.pageSize;var e=p.bind(o);return t=u.extend(t,e),c.isFunction(d.query)&&(t=d.query(t)),t}}},batch:!0,serverAggregates:!0,serverPaging:!0,pageSize:d.pageSize||20},pageable:{numeric:!0,refresh:!0,input:!0,pageSize:d.pageSize,buttonCount:3,messages:{display:"总计:{2}",empty:"当前无数据",page:"转至"},pageSizes:[10,20,50,100]},columns:s,dataBound:function(t){var i=this;d.dataBound&&c.isFunction(d.dataBound)&&d.dataBound(t),a.data("__tooltip")||(a.data("__tooltip",!0),setTimeout(function(){a.find(".k-grid-content").kendoTooltip({filter:"td[show-tooltip=true]",position:"left",content:function(t){return c(t.target).html()}})},200)),d.selection&&0<d.selection.length&&setTimeout(function(){var t=i.dataSource.data(),o=d.id||"id";c(t).each(function(t,n){c(d.selection).each(function(t,e){if(e[o]==n[o])return a.find("tr[data-uid="+n.uid+"] input.k-checkbox").is(":checked")||i.select(a.find("tr[data-uid="+n.uid+"]")),!1})})},50)}}),a.on("dblclick","tbody tr",function(){var t=p.get(a).k().dataItem(c(this));if(d.yes&&c.isFunction(d.yes)){var e=d.yes([t]);(void 0===e||e)&&p.Modal.close()}}),c.isFunction(d.success)&&d.success(t,r,l)},btns:d.btns||["选中并继续","确定","取消"],yes:function(t){var e=p.get(c(t).find(".uglcw-grid")),n=e.selectedRow();if(d.clearSelection&&e.clearSelection(),d.yes&&c.isFunction(d.yes))return d.yes(n),!1},btn2:function(t){if(d.btns){if(d.btn2&&c.isFunction(d.btn2))return d.btn2(t)}else{var e=p.get(c(t).find(".uglcw-grid")).selectedRow();if(d.yes&&c.isFunction(d.yes))return d.yes(e)}},btn3:d.btn3||d.cancel,resizing:function(t){var e=c(t).find(".uglcw-grid"),n=u.ui.get(e).k(),o=c(c(t).find(".layui-layer-content")).height()-c(c(t).find(".criteria")).height()-18;n.setOptions({height:o})}})},s.showUpload=function(n){var o=s.open({btns:n.btns,closable:void 0===n.closable||n.closable,okText:"上传",title:void 0===n.title?"请选择":n.title,area:"300px",content:'<div class="upload-container"><input class="uglcw-file-input" type="file"><div class="drop-zone"><div class="text-wrapper"><p><i class="k-icon k-i-plus"></i></p><p class="drop-file-here">拖拽文件到此处</p></div></div></div>',success:function(t){var e=new p.Upload(c(t).find(".uglcw-file-input"));e.init({url:n.url,field:n.field,autoUpload:void 0!==n.autoUpload&&n.autoUpload,error:n.error||function(){},success:function(t){if(c.isFunction(n.success)){var e=n.success(t);null!=e&&1!=e||p.Modal.close(o)}else p.Modal.close(o)},upload:n.upload||function(){},complete:n.complete||function(){}}),c(t).data("_uploader",e),c(t).find(".drop-zone").on("click",function(){c(t).find(".uglcw-file-input").click()})},yes:function(t){return c(t).data("_uploader").upload(),!1},btn2:function(){}})},s.showMap=function(t){u.extend({enableGeolocation:!0},t);s.open({content:'<div id="_uglcw-map">',success:function(t){}})},s.showProgress=function(e){e=u.extend({percent:0},e);var n=u.util.uuid();s.open({maxmin:!1,closable:!1,modal:!0,resizable:!1,move:!1,content:'<div id="'+n+'" class="layui-progress layui-progress-big" lay-filter="'+n+'" lay-showPercent="true">                        <div class="layui-progress-bar" lay-percent="'+(e.percent||0)+'%"></div>                    </div>',success:function(t){layui.element.progress(n,e.percent)},title:!1,btns:[]})},s.prototype.hide=function(){this.k().hide()},s.prototype.value=function(t){},s.prototype.enable=function(t){},s.prototype.readonly=function(t){},s.prototype.k=function(){return kendo.widgetInstance(c(this._obj))},s.prototype.element=function(){return this.k().wrapper},u.extend(p,{Modal:s})}(jQuery,window,uglcw),function(n,t,o){"use strict";var i=o.ui;function a(t){i.KUI.call(this,t)}((a.prototype=new i.KUI).constructor=a).defaults={content:!0,toolbar:!0},a.prototype.init=function(t){var e=o.extend({},a.defaults,t);i.KUI.prototype.init.call(this,e),n(this._obj).kendoEditor(e),this.initEvent(e)},a.prototype.value=function(t){var e=this.k();if(void 0===t)return e.value();e.value(t)},a.prototype.enable=function(t){this.k().enable(t)},a.prototype.readonly=function(t){this.k().readonly(t)},a.prototype.k=function(){return kendo.widgetInstance(n(this._obj))},a.prototype.element=function(){return this.k().wrapper},o.extend(i,{Editor:a})}(jQuery,window,uglcw),function(s,a,l){"use strict";var d=l.ui;function c(t){d.KUI.call(this,t)}((c.prototype=new d.KUI).constructor=c).defaults={expandAll:!1,expandFirst:!0,expandMode:"single",minHeight:200},c.prototype.init=function(t){var e=this,n=l.extend({expand:function(){}},c.defaults,t);d.KUI.prototype.init.call(this,n),s(this._obj).addClass("uglcw-accordion k-widget k-reset k-header k-panelbar"),s(this._obj).attr("tabindex",0),s(this._obj).attr("role","menu");var o=s(this._obj).find("li"),i=s(this._obj).parent().height();i=i<n.minHeight?n.minHeight:i,s(this._obj).css("height",i-o.length+"px");var r=i-32*o.length;s(o).each(function(t,e){var n=s(e);n.addClass("accordion-item k-item k-state-default");var o=n.children(),i=o[0];s(i).wrap('<span class="uglcw-accordion-header k-link k-header"></span>'),s('<span class="k-icon k-i-arrow-chevron-down k-panelbar-collapse"></span>').insertAfter(i);var a=o[1];s(a).addClass("k-content").css({display:"none",height:r+"px",overflow:"auto",padding:0}),s(a).children().first().css({height:r+"px",overflow:"auto"})}),s(e._obj).on("click",".k-header",function(){e.toggle(s(this).closest("li.accordion-item"))}),n.expandFirst&&e.toggle(s(e._obj).find("li:eq(0)")),s(a).on("resize",function(){e.resize()}),setTimeout(function(){e.resize()},1e3),this.initEvent(n)},c.prototype.toggle=function(t){var e=s(t);e.find(".uglcw-accordion-header .k-icon").toggleClass("k-i-arrow-chevron-down k-i-arrow-chevron-up");var n=e.find(".k-content");if(n.is(":visible"))e.removeClass("k-state-active"),n.slideUp();else{var o=s(this._obj).find(".accordion-item.k-state-active");0<o.length&&(o.removeClass("k-state-active"),o.find(".uglcw-accordion-header .k-icon").toggleClass("k-i-arrow-chevron-down k-i-arrow-chevron-up"),o.find(".k-content").slideUp()),e.addClass("k-state-active"),n.slideDown()}},c.prototype.resize=function(){var t=s(this._obj).parent().height(),e=s(this._obj).find("li.accordion-item");s(this._obj).css("height",t-e.length+"px");var n=t-32*e.length;e.each(function(){var t=s(this).find(".k-content");t.css("height",n+"px"),t.children().first().css({height:n+"px"})})},c.prototype.value=function(t){},c.prototype.enable=function(t){},c.prototype.readonly=function(t){},c.prototype.k=function(){},c.prototype.element=function(){return this._obj},l.extend(d,{Accordion:c})}(jQuery,window,uglcw),function(n,t,o){"use strict";var i=o.ui;function a(t){i.KUI.call(this,t)}((a.prototype=new i.KUI).constructor=a).defaults={closable:!1,type:"primary"},a.prototype.init=function(t){var e=o.extend({},a.defaults,t);e.message=e.message||n(this._obj).text()||"",e.target=n(this._obj),i.KUI.prototype.init.call(this,t),n(this._obj).text(""),n.elementUI.createTag(e),n(this._obj).on("click",".el-tag",function(){n.isFunction(e.click)&&e.click.call(this,e)}),n(this._obj).on("mousedown",".el-icon-close",function(t){n.isFunction(e.close)&&e.close.call(this,t,e)})},a.prototype.value=function(t){},a.prototype.enable=function(t){},a.prototype.readonly=function(t){},o.extend(i,{Tag:a})}(jQuery,window,uglcw),function(d,t,c){"use strict";var e=c.ui;function n(t){e.KUI.call(this,t)}var u=kendo.data.Model.define({fields:{fid:{type:"string"},title:{type:"string"},thumb:{type:"string"},url:{type:"string"},checked:{type:"boolean",default:!1}},idStr:function(){return"uglcw_album_"+this.get("id")}});((n.prototype=new e.KUI).constructor=n).defaults={enable:!0,sortable:!1,multiple:!0,checkbox:!1,cropper:0,aspectRatio:1,field:"file",limit:0,preview:!0,editable:!1,accept:".jpg,.png,.jpeg,.gif"},n.prototype.init=function(a){var r=this,s=c.extend({},n.defaults,a);r.opts=s;var t=c.util.uuid();d(r._obj).addClass("uglcw-album"),d(r._obj).html('<div class="album-list" data-bind="source: dataSource" data-template="album-item-tpl-'+t+'"></div><div class="album-opts"><input class="album-upload" accept="'+s.accept+'" type="file"></div><div class="album-add" data-bind="visible: addable"><i class="ion-md-camera"></i></div>'),d('<script id="album-item-tpl-'+t+'" type="text/x-uglcw-template">    <div class="album-item">        <div class="album-select" data-bind="visible: checkbox">            <input data-bind="attr: {id: idStr}, checked: checked" class="k-checkbox" type="checkbox">            <label data-bind="attr: {for: idStr}" class="k-checkbox-label"></label>        </div>        <img data-bind="attr: {src: thumb}">        <div class="album-item-cover">            <i class="ion-ios-eye" data-bind="click: preview"></i>            <i class="ion-ios-trash" data-bind="click: remove, visible: enable"></i>        </div>    </div><\/script>').appendTo(r._obj),r.vm=kendo.observable({limit:s.limit,editable:s.editable,addable:!0,enable:s.enable,deleted:[],checkbox:s.checkbox,checkAll:function(e){d.map(this.dataSource,function(t){t.set("checked",e)})},value:function(t){var n=this.get("dataSource");n.splice(0,r.vm.dataSource.length),d(t).each(function(t,e){n.push(new u(e))}),0<r.vm.limit&&n.length>=r.vm.limit?r.vm.set("addable",!1):r.vm.set("addable",!0)},edit:function(t){},remove:function(t){var e=t.data,n=this.get("dataSource"),o=n.indexOf(e);c.ui.confirm("确定删除吗？",function(){e.id&&r.vm.deleted.push(e.id),n.splice(o,1),0<r.vm.limit&&r.vm.limit>n.length&&r.vm.set("addable",!0)})},preview:function(t){var e=t.data,n=this.get("dataSource"),o=n.indexOf(e);layer.photos({photos:{start:o,data:d.map(n,function(t){return{src:t.url,pid:t.fid,alt:t.title,thumb:t.thumb||t.url}})},anim:5})},dataSource:[]}),a.dataSource&&(d(a.dataSource).each(function(t,e){if(0<a.limit&&t>a.limit)return r.vm.addable=!1;e.thumb=e.thumb||e.url,r.vm.dataSource.push(new u(e))}),0<a.limit&&a.dataSource.length>=a.limit&&(r.vm.addable=!1)),kendo.bind(d(r._obj),r.vm),a.sortable&&d(r._obj).find(".album-list").kendoSortable({axis:"x",cursor:"move",filter:".album-item",container:d(r._obj).find(".album-list"),placeholder:function(t){return t.clone().addClass("album-placeholder")},hint:function(t){var e=t.clone();return e.find(".album-item-cover").remove(),e.find(".album-select").remove(),e},change:function(t){var e=t.oldIndex,n=t.newIndex,o=r.vm.dataSource[n];r.vm.dataSource[n]=r.vm.dataSource[e],r.vm.dataSource[e]=o,a.sort&&d.isFunction(a.sort)&&a.sort(t)}}),d(r._obj).find(".album-add").on("click",function(){d(r._obj).find(".album-opts .album-upload:last").click()}),s.cropper&&d("#cropper-tpl").length<1&&d('<script id="cropper-tpl" type="text/x-uglcw-template">    <div class="cropper-wrapper">        <div class="img-box">            <img class="cropper-image">        </div>        <div class="right-con">            <div class="preview-box"></div>            <div class="button-box">                <button class="k-button k-info rotate"><i class="k-icon k-i-rotate-right"></i></button>                <button class="k-button zoom-out k-info"><i class="k-icon k-i-zoom-out"></i></button>                <button class="k-button k-info zoom-in"><i class="k-icon k-i-zoom-in"></i></button>                <button class="k-button k-info flip-horizontal"><i class="k-icon k-i-flip-horizontal"></i></button>                <button class="k-button k-info flip-vertical"><i class="k-icon k-i-flip-vertical"></i></button>                <button class="k-button k-info arrow-up"><i class="k-icon k-i-arrow-chevron-up"></i></button>                <button class="k-button k-info arrow-left"><i class="k-icon k-i-arrow-chevron-left"></i></button>                <button class="k-button k-info arrow-down"><i class="k-icon k-i-arrow-chevron-down"></i></button>                <button class="k-button k-info arrow-right"><i class="k-icon k-i-arrow-chevron-right"></i></button>            </div>        </div>    </div><\/script>').appendTo(d("body"));var l=function(o){a.upload&&d.isFunction(a.upload)&&a.upload(o);var t=new FormData;t.append(a.async.saveField||"file",o.file),d.ajax({url:a.async.saveUrl,type:"post",cache:!1,data:t,processData:!1,contentType:!1}).done(function(t){if(a.success&&d.isFunction(a.success)){var e=a.success(t),n=new u({fid:o.fid,file:o.file,url:e.url,thumb:e.thumb||e.url,title:o.name});r.vm.dataSource.push(n)}else r.vm.dataSource.push(o);0<r.vm.limit&&r.vm.limit<=r.vm.dataSource.length&&r.vm.set("addable",!1)}).fail(function(){c.ui.toast("上传失败")})},e={dropZone:d(r._obj).find(".album-add:last"),multiple:s.multiple,select:function(t){var e=r.vm.dataSource.length;d(t.files).each(function(t,i){if(0<a.limit&&e+t>=a.limit)return!1;var n=i.rawFile;n&&setTimeout(function(){var t=new FileReader;t.onloadend=function(){var o=this.result;if(s.cropper){var t=["裁剪","取消"];2===s.cropper&&(t=["裁剪","不裁剪","取消"]),c.ui.Modal.open({maxmin:!1,area:["600px","370px"],content:d("#cropper-tpl").html(),title:!1,btns:t,closeBtn:!1,success:function(t){d(t).find(".cropper-image").attr("src",o),d(t).find(".cropper-image").cropper({checkCrossOrigin:!1,aspectRatio:s.aspectRatio||1,preview:".preview-box"});var n=d(t).find(".cropper-image").data("cropper"),e=function(t,e){n.move(t,e)};d(t).find(".k-button.rotate").on("click",function(){n.rotate(90)}),d(t).find(".k-button.zoom-out").on("click",function(){n.zoom(-.1)}),d(t).find(".k-button.zoom-in").on("click",function(){n.zoom(.1)}),d(t).find(".k-button.flip-horizontal").on("click",function(){n.scaleX(-n.getData().scaleX)}),d(t).find(".k-button.flip-vertical").on("click",function(){n.scaleY(-n.getData().scaleY)}),d(t).find(".k-button.arrow-up").on("click",function(){e(0,-4)}),d(t).find(".k-button.arrow-down").on("click",function(){e(0,4)}),d(t).find(".k-button.arrow-left").on("click",function(){e(-4,0)}),d(t).find(".k-button.arrow-right").on("click",function(){e(4,0)})},yes:function(t){var n=d(t).find(".cropper-image").data("cropper").getCroppedCanvas();n.toBlob(function(t){var e=new u({fid:c.util.uuid(),file:new File([t],i.name,{type:t.type,lastModified:Date.now()}),url:n.toDataURL(),thumb:n.toDataURL(),title:i.name});if(a.async)l(e);else{if(0<r.vm.limit&&r.vm.limit<=r.vm.dataSource.length)return c.ui.warning("图片数量超出限制");r.vm.dataSource.push(e),0<r.vm.limit&&r.vm.limit<=r.vm.dataSource.length&&r.vm.set("addable",!1)}})},btn2:function(){if(0<r.vm.limit&&r.vm.limit<r.vm.dataSource.length)return c.ui.warning("图片数量超出限制");var t=new u({fid:c.util.uuid(),file:n,url:o,thumb:o,title:i.name});a.async?l(t):(r.vm.dataSource.push(t),0<r.vm.limit&&r.vm.limit<=r.vm.dataSource.length&&r.vm.set("addable",!1))}})}else{if(0<r.vm.limit&&r.vm.limit<r.vm.dataSource.length)return c.ui.warning("图片数量超出限制");var e=new u({fid:c.util.uuid(),file:n,url:o,thumb:o,title:i.name});a.async?l(e):(r.vm.dataSource.push(e),0<r.vm.limit&&r.vm.limit<=r.vm.dataSource.length&&r.vm.set("addable",!1))}},t.readAsDataURL(n)},100)})}};new c.ui.Upload(d(r._obj).find(".album-upload")).init(e)},n.prototype.value=function(t){if(void 0===t)return this.vm.dataSource.toJSON();this.vm.value(t)},n.prototype.getDeleted=function(){return this.vm.deleted},n.prototype.bindFormData=function(e){var n=this;return d.map(n.vm.dataSource.toJSON(),function(t){t.file&&e.append(n.opts.field,t.file,t.title)}),e},n.prototype.enable=function(t){},n.prototype.readonly=function(t){},c.extend(e,{Album:n})}(jQuery,window,uglcw),function(s,t,e){"use strict";var l=e.ui,d=kendo.ui.Widget,n=d.extend({init:function(t,e){d.fn.init.call(this,t,e);var n=this,o=s(t).attr("style");s(t).prop("readonly")&&(s(t).removeAttr("readonly"),s(t).attr("data-readonly",!0)),e.allowInput||s(t).attr("data-readonly",!e.allowInput),s(t).wrap('<div class="k-gridselector k-textbox k-space-right" '+(o?'style="'+o+'"':"")+"></div>"),s(t).after('<a href="javascript:void(0);" class="k-select k-icon '+e.icon+'"></a>');var i=s(t).closest(".k-gridselector"),a=s(t);if(this._validation(),e.clearButton){var r=s('<span unselectable="on" class="k-icon k-clear-value k-i-close" title="clear" role="button" tabindex="-1"></span>');r.insertBefore(i.find(".k-select")),r.on("click",function(t){n.value(""),n.text(""),a.trigger("change")}),n.value()||i.find(".k-i-close").addClass("k-hidden"),a.bind("change",function(){n.value()?i.find(".k-i-close").removeClass("k-hidden"):i.find(".k-i-close").addClass("k-hidden")})}i.on("mouseenter",function(){n.enable()&&s(this).addClass("k-state-hover")}),i.on("mouseleave",function(){s(this).removeClass("k-state-hover")}),s(t).closest(".k-textbox").find("."+e.icon).on("click",function(){s.isFunction(e.click)?e.click.apply(n):l.Modal.showGridSelector(e.selectorOptions||{})}),s(t).on("dblclick",function(){s.isFunction(e.click)?e.click.apply(n):l.Modal.showGridSelector({})}),e.value&&this.value(e.value),e.text&&this.text(e.text),e.readonly&&this.readonly(!0),e.disable&&this.enable(!1),e.tooltip&&new l.Tooltip(i).init({content:l.attr(t,"label")||e.tooltip}),s.isFunction(e.change)},options:{name:"uglcwGridSelector"},_validation:function(){var t=this.element;this._validationIcon=s("<span class='k-icon k-i-warning'></span>").hide().insertAfter(t)},readonly:function(t){if(void 0===t)return s(this.element).prop("data-readonly");s(this.element).attr("data-readonly",t)},enable:function(t){if(void 0===t)return!s(this.element).closest(".k-textbox").hasClass("k-state-disabled");t?s(this.element).closest(".k-textbox").removeClass("k-state-disabled"):s(this.element).closest(".k-textbox").addClass("k-state-disabled")},destroy:function(){},value:function(t){if(void 0===t)return s(this.element).val();s(this.element).val(t),s(this.element).trigger("change")},text:function(t){if(void 0===t)return s(this.element).data("text");s(this.element).data("text",t)}});function o(t){l.KUI.call(this,t)}kendo.ui.plugin(n),((o.prototype=new l.KUI).constructor=o).defaults={dataTextField:"text",dataValueField:"value",selectorOptions:{},icon:"k-i-more-horizontal",allowInput:!1,disable:!1,readonly:!1,tooltip:!1,clearButton:!0},o.prototype.init=function(t){l.KUI.prototype.init.call(this,t),t=s.extend({},o.defaults,t),s(this._obj).kendouglcwGridSelector(t),this.initEvent(t)},o.prototype.value=function(t){return this.k().value(t)},o.prototype.text=function(t){return this.k().text(t)},o.prototype.bind=function(t,e){var n=this.k();if(-1===t.indexOf(",")){return void 0!==e?n.value(e[t]):((o={})[t]=n.value(),o)}else{var o,i=t.split(",");if(void 0===e)return(o={})[i[0]]=n.value(),o[i[1]]=n.text(),o;n.value(e[i[0]]),n.text(e[i[1]])}},o.prototype.enable=function(t){return this.k().enable(t)},o.prototype.readonly=function(t){return this.k().readonly(t)},o.prototype.k=function(){return kendo.widgetInstance(s(this._obj))},o.prototype.element=function(){return this.k().element},e.extend(l,{GridSelector:o})}(jQuery,window,uglcw),function(i,t,a){"use strict";var r=a.ui;function e(t){r.KUI.call(this,t)}((e.prototype=new r.KUI).constructor=e).defaults={autoWith:!0,filter:"contains",noDataTemplate:"暂无数据"},e.prototype.init=function(t){r.KUI.prototype.init.call(this,t);var o=i.extend({},e.defaults,t);o.url&&(o.dataSource={serverFiltering:!0,schema:i.extend({data:function(t){return t.list||[]}},o.loadFilter),transport:{read:{url:o.url,type:o.type||"get",data:function(t){var e=a.extend({},t);if(o.criteria){var n=r.bind(o.criteria);e=a.extend(e,n)}return i.isFunction(o.query)&&(e=o.query(e)),e}}}}),i(this._obj).kendoScheduler(o),this.initEvent(t)},e.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},e.prototype.reload=function(){this.k().dataSource.read()},e.prototype.enable=function(t){this.k().enable(t)},e.prototype.readonly=function(t){this.k().readonly(t)},e.prototype.k=function(){return kendo.widgetInstance(i(this._obj))},e.prototype.element=function(){return this.k().wrapper},a.extend(r,{Scheduler:e})}(jQuery,window,uglcw),function(n,t,o){"use strict";var i=o.ui;function a(t){i.KUI.call(this,t)}((a.prototype=new i.KUI).constructor=a).defaults={},a.prototype.init=function(t){var e=o.extend({},a.defaults,t);i.KUI.prototype.init.call(this,e),n(this._obj).kendoQRCode(e),this.initEvent(e)},a.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},a.prototype.enable=function(t){this.k().enable(t)},a.prototype.readonly=function(t){this.k().readonly(t)},a.prototype.k=function(){return kendo.widgetInstance(n(this._obj))},a.prototype.element=function(){return this.k().wrapper},o.extend(i,{QRCode:a})}(jQuery,window,uglcw),function(n,t,o){"use strict";var i=o.ui;function a(t){i.KUI.call(this,t)}((a.prototype=new i.KUI).constructor=a).defaults={},a.prototype.init=function(t){var e=o.extend({},a.defaults,t);i.KUI.prototype.init.call(this,e),n(this._obj).kendoBarcode(e),this.initEvent(e)},a.prototype.value=function(t){var e=this.k();if(null==t)return e.value();e.value(t)},a.prototype.enable=function(t){this.k().enable(t)},a.prototype.readonly=function(t){this.k().readonly(t)},a.prototype.k=function(){return kendo.widgetInstance(n(this._obj))},a.prototype.element=function(){return this.k().wrapper},o.extend(i,{Barcode:a})}(jQuery,window,uglcw),function(a,r,s){"use strict";var l=s.ui,d="_resize_delay";function c(t){l.KUI.call(this,t)}((c.prototype=new l.KUI).constructor=c).defaults={delay:50,responsive:[],resize:function(){}},c.prototype.init=function(t){var e,o,i,n;l.KUI.prototype.init.call(this,t),this.options=s.extend({},c.defaults,t),a(this._obj).addClass("uglcw-resizable"),e=this._obj,o=this.options,i=o.responsive,n=function(){var t=a(e).data(d);t&&clearTimeout(t),t=setTimeout(function(){var n=0;a(i).each(function(t,e){n+="number"==typeof e?e:a(e).height()});var t=a(r).height()-n;a(e).css("height",t).css("overflow-y","auto"),o.resize&&a.isFunction(o.resize)&&o.resize()},o.delay),a(e).data(d,t)},a(r).resize(n),n(),this.initEvent(t)},c.prototype.enable=function(t){this.k().enable(t)},c.prototype.readonly=function(t){this.k().enable(!t)},c.prototype.k=function(){return kendo.widgetInstance(a(this._obj))},c.prototype.element=function(){return this.k().wrapper},s.extend(l,{Resizable:c})}(jQuery,window,uglcw),function(o,t,i){"use strict";var a=i.ui,r=t.wangEditor;function s(t){a.KUI.call(this,t)}((s.prototype=new a.KUI).constructor=s).defaults={debug:!1,menus:["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","video","code","undo","redo"],fontNames:["宋体","微软雅黑","Arial","Tahoma","Verdana"],uploadImgServer:"/manager/photo/wangEditorUpload",uploadFileName:"file",uploadImgMaxSize:3145728,uploadImgMaxLength:5},s.prototype.init=function(t){var e=i.extend({},s.defaults,t);a.KUI.prototype.init.call(this,e);var n=new r(this._obj);n.customConfig=e,n.create(),o(this._obj).data("wangEditor",n),this.initEvent(e)},s.prototype.value=function(t){var e=this.k();if(void 0===t){var n=e.txt.html();return"<p><br></p>"==n?"":n}e.txt.html(t)},s.prototype.append=function(t){this.k().txt.append(t)},s.prototype.clear=function(){this.k().txt.clear()},s.prototype.enable=function(t){this.k().$textElem.attr("contenteditable",t)},s.prototype.readonly=function(t){this.k().enable(!t)},s.prototype.k=function(){return o(this._obj).data("wangEditor")},s.prototype.element=function(){return this.k().wrapper},i.extend(a,{WangEditor:s})}(jQuery,window,uglcw),function(r,t,s){var e={initialized:!1,init:function(){if(!this.initialized){this.initialized=!0;var o=function(){var t=r(".uglcw-layout-content .uglcw-grid");0<t.length&&t.each(function(){s.ui.get(this).resize()})},i=".uglcw-layout-toggle-bar";r(".uglcw-layout-fixed").each(function(){var t=r(this),e=s.util.parseObject(s.ui.attr(t,"options"));t.children().wrapAll('<div class="uglcw-layout-fixed-content"></div>');var n=t.find(".uglcw-layout-fixed-content");t.data("width",t.width()),0===t.find(i).length&&r('<div class="uglcw-layout-toggle-bar"><div class="k-icon k-i-arrow-chevron-left"></div></div>').appendTo(t),t.on("click",i,function(){r(this).find(".k-icon").toggleClass("k-i-arrow-chevron-left k-i-arrow-chevron-right"),16<t.width()?(n.hide(),t.animate({width:0},300,function(){n.hide(),o()}),r.isFunction(e.change)&&e.change(!1)):(t.animate({width:t.data("width")},300,function(){n.show(),o()}),r.isFunction(e.change)&&e.change(!0))}),e.collapsed&&(t.width(0),n.hide())}),r(".uglcw-query").on("keydown","input",function(t){t.keyCode===kendo.keys.ENTER&&r(".uglcw-query #search").click()});var a={list:function(n){r.ajax({url:"/manager/common/querysolution/"+n,type:"get",success:function(t){t.success&&t.data&&0<t.data.length&&(r(".uglcw-query .query-solution-item").remove(),r.map(t.data,function(t){var e=r('<li class="query-solution-item"></li>');e.appendTo(r(".uglcw-query")),new s.ui.Tag(e).init({solution:t,type:"primary",message:t.title,closable:!0,click:function(t){r(".uglcw-query .el-tag").removeClass("el-tag--default").addClass("el-tag--primary"),r(e).find(".el-tag").removeClass("el-tag--primary").addClass("el-tag--default"),a.query(n,t.solution.id)},close:function(e,t){a.remove(n,t.solution.id,function(t){t||e.stopPropagation(),a.list(n)})}})}),s.ui.get(".uglcw-grid").resize())}})},remove:function(t,e,n){r.ajax({async:!1,url:"/manager/common/querysolution/"+t+"/"+e,type:"DELETE",success:function(t){n(t.success)},error:function(){n(!1)}})},add:function(e,t,n){var o=s.ui.bind(".uglcw-query"),i=r.map(o,function(t,e){return{field:e,value:t,op:0}});r.ajax({url:"/manager/common/querysolution/"+e,type:"POST",contentType:"application/json",data:JSON.stringify({namespace:e,title:t,items:i,share:n}),success:function(t){t.success&&(s.ui.success(t.message||"保存成功"),a.list(e))}})},query:function(t,e){r.ajax({url:"/manager/common/querysolution/"+t+"/"+e,type:"GET",success:function(t){if(t.success){var e=t.data||[],n={};r.map(e,function(t){n[t.field]=t.value}),s.ui.bind(".uglcw-query",n),r(".uglcw-query #search").click()}}})}},e=r(".uglcw-query").data("module");if(e&&(a.list(e),0<r("#search").length)){var t=r("#search").closest("li");t.css("cssText","width:180px !important;"),t.append('<button class="query-solution-save ghost k-button k-info">保存</button>'),t.find(".query-solution-save").on("click",function(){s.ui.Modal.open({title:"新增查询方案",maxmin:!1,content:'<input class="query-solution-input" placeholder="请输入查询方案名称" uglcw-role="textbox" uglcw-model="title">',btns:["保存","保存为共享方案","取消"],success:function(t){s.ui.init(t),r(t).find(".query-solution-input").focus()},yes:function(t){a.add(e,s.ui.bind(r(t)).title,!1)},btn2:function(t){a.add(e,s.ui.bind(r(t)).title,!0)}})})}}}};s.layout=e}(jQuery,window,uglcw),function(r,t,e){"use strict";var n={},s=e.ui,l=e.util;n.state=function(t,a){r(t).find("["+s.attrPrefix+"role]").each(function(t,e){var n=s.attr(e,"state");n=void 0===n?7:l.toInt(n);var o=s.get(e);if(o.state)o.state(a);else{var i=0<(n&a);i&&"readonly"===r(this).attr("readonly")||o.enable(i)}})},e.biz=n}(jQuery,window,uglcw);